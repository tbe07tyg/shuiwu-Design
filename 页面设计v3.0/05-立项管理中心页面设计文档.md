# 🏗️ 立项管理中心页面设计文档 v2.0

## 📄 页面基础信息

- **页面名称**: 立项管理中心（Project Approval Center）
- **路由地址**: `/approval`
- **组件路径**: `src/views/approval/index.vue`
- **设计版本**: v2.0
- **更新时间**: 2025-01-17
- **实现状态**: 📋 设计阶段

## 🔄 v2.0版本设计说明

### 🎯 核心功能定位
立项管理中心是科研项目从需求转化为正式项目的关键环节，负责项目立项申请、审批流程管理、立项决策支持等核心业务。

### 📊 业务流程设计
```
需求池 → 立项申请 → 初审 → 专家评审 → 决策审批 → 立项成功
  ↓        ↓        ↓      ↓        ↓         ↓
需求筛选  申请材料  材料审核  评审会议  领导决策  项目启动
```

## 🎨 UI布局草图

### 页面整体布局

```
┌─────────────────────────────────────────────────────────────────┐
│                   🏗️ 立项管理中心                                │
│                 (背景 #f5f8ff, 全屏布局)                        │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              📊 立项统计概览卡片                         │   │
│  │  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐      │   │
│  │  │待申请│  │审核中│  │已立项│  │已拒绝│  │成功率│      │   │
│  │  │ 12   │  │ 28   │  │ 156  │  │  5   │  │ 89%  │      │   │
│  │  │ 📝   │  │ 🔍   │  │ ✅   │  │ ❌   │  │ 📈   │      │   │
│  │  └──────┘  └──────┘  └──────┘  └──────┘  └──────┘      │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │           🔍 筛选和操作工具栏                             │   │
│  │  状态[全部▼] 类型[全部▼] 优先级[全部▼] 时间[全部▼]        │   │
│  │                                              [📋新建立项] │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                📋 立项申请列表                           │   │
│  │ ┌─────────────────────────────────────────────────────┐ │   │
│  │ │ 🔍 智慧水务监测系统V2.0     【待申请】   2025-01-15 │ │   │
│  │ │ 申请人：张工程师  需求来源：客户反馈   优先级：高   │ │   │
│  │ │ 预算：50万   周期：6个月   [查看] [申请立项] [编辑] │ │   │
│  │ └─────────────────────────────────────────────────────┘ │   │
│  │ ┌─────────────────────────────────────────────────────┐ │   │
│  │ │ 🔍 污水处理智能控制平台     【初审中】   2025-01-10 │ │   │
│  │ │ 申请人：李工程师  需求来源：市场调研   优先级：中   │ │   │
│  │ │ 预算：80万   周期：8个月   [查看] [审核进度] [催办] │ │   │
│  │ └─────────────────────────────────────────────────────┘ │   │
│  │ ┌─────────────────────────────────────────────────────┐ │   │
│  │ │ ✅ 水质监测物联网系统       【已立项】   2025-01-05 │ │   │
│  │ │ 申请人：王工程师  需求来源：政府需求   优先级：高   │ │   │
│  │ │ 预算：120万  周期：12个月  [查看] [进入实施] [归档] │ │   │
│  │ └─────────────────────────────────────────────────────┘ │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              📄 分页和批量操作                           │   │
│  │  ☐全选 批量操作[下拉] [导出Excel]      [1][2][3]...[9] │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

### 立项申请流程图

```
┌─────────────────────────────────────────────────────────────────┐
│                    📋 立项申请流程                                │
│                                                                 │
│  📝[立项申请] → 🔍[材料初审] → 👥[专家评审] → 👔[决策审批]      │
│      ↓              ↓              ↓              ↓            │
│   填写申请表      材料完整性检查    专家打分评议    领导最终决策   │
│   上传附件        初步可行性分析    现场答辩汇报    立项批准签字   │
│   预算规划        合规性审核        修改建议        资源分配     │
│                                                                 │
│  状态流转：                                                     │
│  [待申请] → [初审中] → [评审中] → [决策中] → [已立项/已拒绝]      │
│                                                                 │
│  时间节点：                                                     │
│  Day 1-3      Day 4-7       Day 8-14      Day 15-21          │
│  申请提交     材料审核       专家评审       领导决策             │
└─────────────────────────────────────────────────────────────────┘
```

### 立项详情弹窗设计

```
┌─────────────────────────────────────────────────────────────────┐
│              📋 立项申请详情 - 智慧水务监测系统V2.0                │
├─────────────────────────────────────────────────────────────────┤
│ 【基础信息】                                                     │
│ 项目名称: 智慧水务监测系统V2.0                                    │
│ 申请人: 张工程师          申请时间: 2025-01-15                    │
│ 需求来源: 客户反馈        优先级: 高                              │
│ 项目类型: 产品开发        预算: 50万元                            │
│ 预计周期: 6个月          预计开始: 2025-03-01                     │
│                                                                 │
│ 【项目描述】                                                     │
│ 基于现有V1.0系统，升级水质监测算法，增加AI预警功能...             │
│                                                                 │
│ 【技术方案】                                                     │
│ 1. 升级传感器硬件，提升监测精度                                   │
│ 2. 集成机器学习算法，实现智能预警                                 │
│ 3. 开发移动端APP，支持远程监控                                   │
│                                                                 │
│ 【预算明细】                                                     │
│ 人员费用: 30万 | 设备费用: 15万 | 其他费用: 5万                   │
│                                                                 │
│ 【附件材料】                                                     │
│ 📄 需求分析报告.pdf  📄 技术方案.docx  📊 预算明细.xlsx          │
│                                                                 │
│ 【审批记录】                                                     │
│ 2025-01-16 | 材料初审 | 张主管 | 通过 | 材料完整                 │
│ 2025-01-18 | 专家评审 | 李专家 | 通过 | 技术方案可行              │
│ 2025-01-20 | 决策审批 | 王总监 | 待定 | 等待最终决策              │
│                                                                 │
│                          [关闭] [打印] [导出PDF]                │
└─────────────────────────────────────────────────────────────────┘
```

## 📐 设计规格

### 🌈 色彩方案
- **页面背景**: `#f5f8ff` (淡蓝色)
- **卡片背景**: `#ffffff` (纯白)
- **统计卡片渐变**: `linear-gradient(135deg, #667eea 0%, #764ba2 100%)`
- **状态标签颜色**:
  - 待申请: `#faad14` (橙色)
  - 初审中: `#1890ff` (蓝色)
  - 评审中: `#722ed1` (紫色)
  - 决策中: `#fa8c16` (橙红)
  - 已立项: `#52c41a` (绿色)
  - 已拒绝: `#ff4d4f` (红色)

### 📏 尺寸规格
- **页面内边距**: `24px`
- **卡片圆角**: `12px`
- **卡片间距**: `16px`
- **统计卡片高度**: `120px`
- **列表项高度**: `最小100px`
- **按钮高度**: `36px`

### 📝 字体规格
- **页面标题**: 24px, font-weight: bold
- **统计数字**: 28px, font-weight: bold
- **统计标题**: 14px
- **项目名称**: 16px, font-weight: 600
- **详细信息**: 13px
- **状态标签**: 12px, font-weight: 500

## ⚡ 交互逻辑

### 🔄 页面初始化逻辑

1. **数据加载**
   ```javascript
   /**
    * 页面挂载时加载立项统计数据
    */
   async function loadApprovalStats() {
     const stats = await fetchApprovalStatistics();
     approvalStats.value = stats;
   }
   
   /**
    * 加载立项申请列表
    */
   async function loadApprovalList() {
     const list = await fetchApprovalList(currentPage.value, pageSize.value, filters.value);
     approvalList.value = list.data;
     total.value = list.total;
   }
   ```

2. **筛选器联动**
   ```javascript
   /**
    * 监听筛选条件变化
    */
   watch(filters, () => {
     currentPage.value = 1;
     loadApprovalList();
   }, { deep: true });
   ```

### 🎯 核心交互功能

1. **立项申请流程**
   ```javascript
   /**
    * 新建立项申请
    */
   function createNewApproval() {
     router.push('/approval/create');
   }
   
   /**
    * 查看申请详情
    */
   function viewApprovalDetail(id) {
     showDetailModal.value = true;
     currentApprovalId.value = id;
     loadApprovalDetail(id);
   }
   ```

2. **状态流转操作**
   ```javascript
   /**
    * 提交申请立项
    */
   async function submitApproval(id) {
     await updateApprovalStatus(id, 'submitted');
     message.success('立项申请已提交');
     loadApprovalList();
   }
   
   /**
    * 审核操作
    */
   async function reviewApproval(id, action, comment) {
     await submitReview(id, action, comment);
     message.success('审核完成');
     loadApprovalList();
   }
   ```

### 🔍 搜索和筛选逻辑

1. **多维度筛选**
   ```javascript
   const filters = reactive({
     status: '', // 状态筛选
     type: '',   // 类型筛选
     priority: '', // 优先级筛选
     dateRange: [] // 时间范围
   });
   ```

2. **批量操作**
   ```javascript
   /**
    * 批量导出
    */
   function batchExport() {
     const selectedIds = selectedRowKeys.value;
     if (selectedIds.length === 0) {
       message.warning('请先选择要导出的项目');
       return;
     }
     exportApprovalData(selectedIds);
   }
   ```

## 🌐 页面间跳转

### 📍 主要跳转路径

1. **内部跳转**
   - 新建立项: `/approval` → `/approval/create`
   - 查看详情: `/approval` → `/approval/detail/:id`
   - 材料审核: `/approval` → `/approval/materials/:id`
   - 评审管理: `/approval` → `/approval/review/:id`
   - 决策审批: `/approval` → `/approval/decision/:id`

2. **外部跳转**
   - 需求来源: `/approval` → `/research/requirements`
   - 立项成功: `/approval` → `/implementation/center`
   - 预算管理: `/approval` → `/implementation/payment`

### 🔗 路由参数设计

```javascript
// 路由配置
{
  path: '/approval',
  component: () => import('@/views/approval/index.vue'),
  children: [
    {
      path: 'create',
      component: () => import('@/views/approval/create.vue')
    },
    {
      path: 'detail/:id',
      component: () => import('@/views/approval/detail.vue')
    },
    {
      path: 'materials/:id',
      component: () => import('@/views/approval/materials/index.vue')
    },
    {
      path: 'review/:id',
      component: () => import('@/views/approval/review/index.vue')
    },
    {
      path: 'decision/:id',
      component: () => import('@/views/approval/decision/index.vue')
    }
  ]
}
```

## 📱 响应式设计

### 💻 桌面端布局 (≥1200px)
- 统计卡片: 5列横排显示
- 列表布局: 卡片式，每行1个项目
- 操作按钮: 全量显示

### 📱 平板端布局 (768px-1199px)
- 统计卡片: 3列显示，第二行2列
- 列表布局: 卡片式，适当缩减信息
- 操作按钮: 收缩为图标

### 📱 手机端布局 (≤767px)
- 统计卡片: 2列显示，分3行
- 列表布局: 紧凑式，关键信息突出
- 操作按钮: 下拉菜单形式

## 🛠️ 技术实现

### 🔧 核心技术栈
- **UI组件**: Ant Design Vue (Table, Card, Select, DatePicker)
- **图表组件**: ECharts (统计图表)
- **状态管理**: Pinia (立项数据状态)
- **表单验证**: Ant Design Vue Validator
- **文件处理**: 文件上传、预览、下载

### 📦 关键组件设计

1. **ApprovalStatCard 统计卡片组件**
   ```vue
   <template>
     <div class="approval-stat-card">
       <div class="stat-number">{{ value }}</div>
       <div class="stat-title">{{ title }}</div>
       <div class="stat-icon">{{ icon }}</div>
     </div>
   </template>
   ```

2. **ApprovalListItem 列表项组件**
   ```vue
   <template>
     <div class="approval-list-item">
       <div class="item-header">
         <h3>{{ project.name }}</h3>
         <StatusTag :status="project.status" />
       </div>
       <div class="item-content">
         <ProjectInfo :project="project" />
       </div>
       <div class="item-actions">
         <ActionButtons :project="project" @action="handleAction" />
       </div>
     </div>
   </template>
   ```

### 🗄️ 数据模型设计

```typescript
interface ApprovalProject {
  id: string;
  name: string;
  applicant: string;
  department: string;
  status: 'draft' | 'submitted' | 'reviewing' | 'approved' | 'rejected';
  priority: 'low' | 'medium' | 'high';
  type: string;
  budget: number;
  duration: number;
  startDate: string;
  description: string;
  technicalPlan: string;
  attachments: FileInfo[];
  reviewHistory: ReviewRecord[];
  createdAt: string;
  updatedAt: string;
}

interface ReviewRecord {
  id: string;
  reviewer: string;
  role: string;
  action: 'approve' | 'reject' | 'return';
  comment: string;
  reviewDate: string;
}
```

## 🌟 用户体验亮点

### ✨ 设计特色

1. **直观的流程可视化**
   - 清晰的状态流转图
   - 色彩编码的状态标识
   - 进度条显示审批进度

2. **智能的操作引导**
   - 状态相关的操作按钮
   - 操作权限的动态显示
   - 批量操作的便捷性

3. **丰富的信息展示**
   - 统计概览卡片
   - 详细的申请信息
   - 完整的审批记录

### 🚀 功能亮点

1. **高效的审批流程**
   - 多角色协同审批
   - 灵活的流程配置
   - 实时的状态同步

2. **便捷的数据管理**
   - 多维度数据筛选
   - 批量操作支持
   - 数据导出功能

3. **完善的权限控制**
   - 角色相关的操作权限
   - 数据访问范围控制
   - 操作日志记录

## 📋 待优化项

### 🔄 短期优化 (v2.1)
- [ ] 增加立项申请模板功能
- [ ] 实现自动化审批提醒
- [ ] 优化移动端交互体验
- [ ] 增加数据统计图表

### 🎯 中期优化 (v2.2)
- [ ] 集成项目评估AI算法
- [ ] 实现审批流程可视化配置
- [ ] 增加专家库管理功能
- [ ] 支持批量导入申请数据

### 🌟 长期规划 (v3.0)
- [ ] 智能推荐立项方向
- [ ] 预测项目成功率
- [ ] 集成企业数字化工作流
- [ ] 支持多语言国际化

---

**📝 设计说明**: 立项管理中心是连接需求调研和项目实施的关键枢纽，通过标准化的申请流程、多维度的评估体系和高效的审批机制，确保科研项目的高质量立项和有序推进。 