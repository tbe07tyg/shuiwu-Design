import{_ as Ee,r as T,a as G,c as oe,l as qe,o as Ie,f as D,w as s,g as c,i as m,d as n,e as t,j as i,m as j,S as Ze,t as p,b as x,v as q,x as I,p as M,O as ze,J as Me,k as C}from"./index-XOIS1SV9.js";import{P as he}from"./PageContainer-BUwLJmxd.js";import{U as Qe}from"./UploadOutlined-BeZhUyI8.js";/* empty css                                                                      */const Oe={class:"filter-section"},Ae={class:"filter-controls"},Le={class:"filter-row"},$e={class:"stats-overview"},Ye={class:"records-list"},Pe={class:"card-header"},Be={class:"card-title"},Fe={class:"record-name"},je={class:"card-info"},He={class:"info-item"},Ne={class:"info-item"},Ve={class:"content-section"},We={class:"section-content"},Je={class:"purpose-tags"},Ge={class:"content-section"},Ke={class:"section-content"},Xe={class:"item-content"},et={class:"item-header"},tt={class:"item-time"},st={class:"item-user"},at={class:"item-desc"},lt={key:0,class:"item-attachments"},nt={class:"attachment-list"},ot=["onClick"],it=["onClick"],rt={class:"card-actions"},ut={class:"pagination-wrapper"},dt={style:{"margin-top":"12px"}},pt={class:"requirement-option"},mt={class:"req-title"},ct={class:"req-category"},ft={class:"stage-selection"},vt={key:0},_t={class:"purpose-tags",style:{"margin-bottom":"16px"}},gt={class:"item-content"},yt={class:"item-time"},wt={class:"item-user"},bt={class:"item-status"},Dt={class:"item-desc"},kt={__name:"index",setup(xt){const _=T({status:"",source:"",keyword:""}),k=T({page:1,size:10,total:0});T({content:"",planDate:"today",duration:"1d"});const h=T({visible:!1}),o=T({title:"",responsible:"张三",department:"技术部",startDate:null,expectedEndDate:null,stages:["analysis","technical"],description:"",priority:"medium",sourceType:"requirement",sourceRequirement:"",sourceDescription:""}),Z=G([{id:"REQ001",title:"智能水质监测系统需求",category:"技术改进",proposerDepartment:"技术部",status:"approved"},{id:"REQ002",title:"污水处理工艺优化需求",category:"工艺升级",proposerDepartment:"工艺部",status:"approved"},{id:"REQ003",title:"管网漏损检测设备采购需求",category:"设备采购",proposerDepartment:"运维部",status:"approved"},{id:"REQ004",title:"运营管理系统数字化改造",category:"系统升级",proposerDepartment:"管理部",status:"pending"},{id:"REQ005",title:"节能减排技术应用研究",category:"技术研发",proposerDepartment:"技术部",status:"approved"}]),Q=G([...Z.value]),U=T({visible:!1,recordId:null}),d=T({content:"",date:null,time:null,responsible:"张三",type:"other",attachments:[]}),S=T({visible:!1,recordId:null}),g=T({status:"active",remark:""}),R=T({visible:!1,record:null}),E=G([{id:"R2024004",title:"REQ004-运营管理系统数字化改造调研",responsible:"赵六",department:"管理部",status:"active",startDate:"2024-02-01",expectedEndDate:"2024-03-15",progress:25,currentStage:"需求分析",latestUpdate:"需求梳理中，已完成业务流程调研",nextMilestone:"2024-02-10 完成需求分析",showQuickAdd:!1,sourceType:"internal",sourceDescription:"管理部内部提出的数字化改造需求",createTime:"2024-02-01T08:00:00.000Z",updateTime:"2024-02-03T14:30:00.000Z",stages:["analysis","technical","design"],items:[{id:"item1",content:"完成业务流程调研和需求梳理",user:"赵六",time:"2024-02-03T14:30:00.000Z",status:"completed"},{id:"item2",content:"启动数字化改造调研项目",user:"赵六",time:"2024-02-01T08:00:00.000Z",status:"active"}]},{id:"R2024001",title:"REQ001-智能水质监测系统调研",responsible:"张三",department:"技术部",status:"completed",startDate:"2024-01-15",endDate:"2024-02-15",expectedEndDate:"2024-02-15",progress:100,showQuickAdd:!1,sourceType:"requirement",sourceId:"REQ001",sourceTitle:"智能水质监测系统需求",sourceCategory:"技术改进",createTime:"2024-01-15T09:00:00.000Z",updateTime:"2024-02-15T18:00:00.000Z",stages:["analysis","technical","design","cost","risk"],items:[{id:"item5",content:"调研项目已完成，形成最终报告",user:"张三",time:"2024-02-15T18:00:00.000Z",attachments:[{id:"att1",name:"智能水质监测系统调研报告.pdf",url:"/attachments/report1.pdf"},{id:"att2",name:"市场分析数据.xlsx",url:"/attachments/data1.xlsx"}]},{id:"item4",content:"完成风险分析和可行性评估",user:"张三",time:"2024-02-13T16:30:00.000Z",attachments:[{id:"att3",name:"风险评估报告.docx",url:"/attachments/risk1.docx"}]},{id:"item3",content:"完成成本评估和投资预算",user:"张三",time:"2024-02-10T14:20:00.000Z"},{id:"item2",content:"完成技术方案设计",user:"张三",time:"2024-02-05T10:15:00.000Z"},{id:"item1",content:"启动智能水质监测系统调研",user:"张三",time:"2024-02-15T09:00:00.000Z"}],result:{conclusion:"技术可行，建议立项实施",investment:150,duration:8,roi:3.2,successRate:85}},{id:"R2024002",title:"REQ002-污水处理工艺优化调研",responsible:"李四",department:"工艺部",status:"active",startDate:"2024-01-20",expectedEndDate:"2024-02-28",progress:60,currentStage:"方案设计",latestUpdate:"初步技术方案已确定，开始详细设计",nextMilestone:"2024-02-05 完成方案设计",showQuickAdd:!1,sourceType:"requirement",sourceId:"REQ002",sourceTitle:"污水处理工艺优化需求",sourceCategory:"工艺升级",createTime:"2024-01-20T10:30:00.000Z",updateTime:"2024-02-01T16:45:00.000Z",stages:["analysis","technical","design"],items:[{id:"item3",content:"初步技术方案已确定，开始详细设计",user:"李四",time:"2024-02-01T16:45:00.000Z"},{id:"item2",content:"完成技术调研和市场分析",user:"李四",time:"2024-01-28T11:20:00.000Z"},{id:"item1",content:"启动污水处理工艺优化调研",user:"李四",time:"2024-01-20T10:30:00.000Z"}]},{id:"R2024003",title:"REQ003-管网漏损检测设备调研",responsible:"王五",department:"运维部",status:"paused",startDate:"2024-01-10",expectedEndDate:"2024-02-20",expectedResumeDate:"2024-02-10",progress:30,pauseReason:"等待预算确认，供应商报价延迟",pauseNote:"需等待财务部门预算批复",showQuickAdd:!1,sourceType:"external",sourceDescription:"华水集团总部委托调研项目",createTime:"2024-01-10T14:20:00.000Z",updateTime:"2024-01-25T11:15:00.000Z",stages:["analysis","technical","design"],items:[{id:"item3",content:"调研项目暂停，等待预算确认",user:"王五",time:"2024-01-25T11:15:00.000Z"},{id:"item2",content:"完成技术调研和设备选型",user:"王五",time:"2024-01-18T15:30:00.000Z"},{id:"item1",content:"启动管网漏损检测设备调研",user:"王五",time:"2024-01-10T14:20:00.000Z"}]}]),O=oe(()=>{const l=E.value;return{total:l.length,active:l.filter(e=>e.status==="active").length,completed:l.filter(e=>e.status==="completed").length,paused:l.filter(e=>e.status==="paused").length,terminated:l.filter(e=>e.status==="terminated").length}}),K=oe(()=>{let l=E.value;return _.status&&(l=l.filter(e=>e.status===_.status)),_.source&&(l=l.filter(e=>e.sourceType===_.source)),_.keyword&&(l=l.filter(e=>e.title.toLowerCase().includes(_.keyword.toLowerCase())||e.responsible.includes(_.keyword)||e.sourceTitle&&e.sourceTitle.toLowerCase().includes(_.keyword.toLowerCase())||e.sourceDescription&&e.sourceDescription.toLowerCase().includes(_.keyword.toLowerCase()))),l.sort((e,u)=>{const r=new Date(e.createTime||e.startDate||"2024-01-01").getTime(),y=new Date(u.createTime||u.startDate||"2024-01-01").getTime();if(r!==y)return y-r;const Y={active:1,paused:2,completed:3,terminated:4},A=Y[e.status]||5,L=Y[u.status]||5;return A-L}),l});qe(K,l=>{k.total=l.length},{immediate:!0});const ie=l=>({active:"processing",completed:"success",paused:"warning",terminated:"error"})[l]||"default",re=l=>({active:"🔄",completed:"🟢",paused:"⏸️",terminated:"❌"})[l]||"❓",H=l=>({active:"进行中",completed:"已完成",paused:"已暂停",terminated:"已终止"})[l]||"未知",X=l=>({analysis:"需求分析",technical:"技术调研",design:"方案设计",cost:"成本评估",risk:"风险分析",market:"市场调研"})[l]||l,ue=l=>{U.recordId=l,U.visible=!0,Object.assign(d,{content:"",date:null,time:null,responsible:"张三",type:"other",attachments:[]})},ee=()=>{U.visible=!1,U.recordId=null},de=()=>{if(!d.content.trim()){C.warning("请填写事项内容");return}if(!d.date){C.warning("请选择日期");return}const l=E.value.find(e=>e.id===U.recordId);if(l){let e=d.date.format("MM-DD");d.time&&(e+=" "+d.time.format("HH:mm"));const u={id:Date.now(),content:d.content,user:d.responsible,time:e,type:d.type};d.attachments&&d.attachments.length>0&&(u.attachments=d.attachments.map(r=>{var y;return{id:Date.now()+Math.random(),name:r.name,url:((y=r.response)==null?void 0:y.url)||"#"}})),l.items=l.items||[],l.items.unshift(u),C.success("调研事项添加成功"),ee()}},pe=l=>{C.info(`正在下载附件: ${l.name}`);const e=document.createElement("a");e.href=l.url||"#",e.download=l.name,e.click()},me=l=>l&&l.isBefore(new Date,"day"),ce=l=>["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","image/jpeg","image/png","image/gif"].includes(l.type)?(l.size/1024/1024<10||C.error("文件大小不能超过10MB！"),!1):(C.error("文件格式不支持，请上传PDF、Word、Excel或图片文件！"),!1),fe=()=>{h.visible=!0,Object.assign(o,{title:"",responsible:"张三",department:"技术部",startDate:null,expectedEndDate:null,stages:["analysis","technical"],description:"",priority:"medium",sourceType:"requirement",sourceRequirement:"",sourceDescription:""}),Q.value=[...Z.value]},ve=()=>{h.visible=!1},_e=()=>{o.sourceRequirement="",o.sourceDescription="",o.sourceType==="requirement"&&(Q.value=[...Z.value])},ge=l=>{if(!l){Q.value=[...Z.value];return}Q.value=Z.value.filter(e=>e.title.toLowerCase().includes(l.toLowerCase())||e.id.toLowerCase().includes(l.toLowerCase())||e.category.includes(l))},ye=()=>{if(!o.title.trim()){C.error("请输入调研标题");return}if(o.stages.length===0){C.error("请至少选择一个调研阶段");return}const l=Date.now().toString();let e={};if(o.sourceType==="requirement"&&o.sourceRequirement){const r=Z.value.find(y=>y.id===o.sourceRequirement);r&&(e={sourceType:"requirement",sourceId:r.id,sourceTitle:r.title,sourceCategory:r.category})}else o.sourceDescription.trim()&&(e={sourceType:o.sourceType,sourceDescription:o.sourceDescription});const u={id:l,title:o.title,responsible:o.responsible,department:o.department,startDate:o.startDate?o.startDate.format("YYYY-MM-DD"):null,expectedEndDate:o.expectedEndDate?o.expectedEndDate.format("YYYY-MM-DD"):null,stages:o.stages,description:o.description,priority:o.priority,status:"active",progress:0,items:[],createTime:new Date().toISOString(),updateTime:new Date().toISOString(),currentStage:o.stages[0],...e};E.value.push(u),C.success("调研记录创建成功！"),h.visible=!1,console.log("新建调研记录：",u)},we=l=>{const e=E.value.find(u=>u.id===l);e&&(S.recordId=l,S.visible=!0,g.status=e.status,g.remark="")},be=()=>{const l=E.value.find(e=>e.id===S.recordId);l&&(l.status!==g.status&&(l.status=g.status,l.updateTime=new Date().toISOString(),l.items=l.items||[],l.items.push({id:"item"+Date.now(),content:`调研状态变更为"${H(g.status)}"${g.remark?"，备注："+g.remark:""}`,user:l.responsible,time:new Date().toISOString(),status:g.status})),C.success("调研状态已更新"),se())},De=(l,e)=>{k.size=e,k.page=1},ke=(l,e)=>{k.page=l,k.size=e},$=()=>{k.page=1},te=l=>{const e=E.value.find(u=>u.id===l);e&&(R.record=e,R.visible=!0)},se=()=>{S.visible=!1,S.recordId=null,Object.assign(g,{status:"active",remark:""})},xe=l=>!l.items||l.items.length===0?[]:[...l.items].sort((e,u)=>new Date(u.time).getTime()-new Date(e.time).getTime()).slice(0,3).map(e=>({...e,time:ae(e.time)})),ae=l=>{const e=new Date(l);return`${e.getMonth()+1}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},Te=l=>!l.items||l.items.length===0?[]:[...l.items].sort((e,u)=>new Date(u.time).getTime()-new Date(e.time).getTime()).map(e=>({...e,time:ae(e.time)}));return Ie(()=>{}),(l,e)=>{const u=c("a-button"),r=c("a-select-option"),y=c("a-select"),Y=c("a-input-search"),A=c("a-tag"),L=c("a-timeline-item"),le=c("a-timeline"),Ce=c("a-pagination"),ne=c("a-input"),f=c("a-form-item"),v=c("a-radio"),P=c("a-radio-group"),b=c("a-col"),B=c("a-row"),N=c("a-date-picker"),z=c("a-checkbox"),Re=c("a-checkbox-group"),V=c("a-textarea"),W=c("a-form"),F=c("a-modal"),Ue=c("a-time-picker"),Se=c("a-upload");return m(),D(he,{title:"📊 调研记录",description:"项目调研全过程记录，追踪进度查看结果"},{actions:s(()=>[t(u,{type:"primary",onClick:fe},{default:s(()=>[t(j(ze)),e[29]||(e[29]=i(" 新建调研记录 "))]),_:1,__:[29]}),t(u,{type:"primary",ghost:""},{default:s(()=>[t(j(Me)),e[30]||(e[30]=i(" 📊 导出记录 "))]),_:1,__:[30]})]),default:s(()=>[n("div",Oe,[n("div",Ae,[n("div",Le,[e[40]||(e[40]=n("span",{class:"filter-label"},"状态:",-1)),t(y,{value:_.status,"onUpdate:value":e[0]||(e[0]=a=>_.status=a),placeholder:"全部状态","allow-clear":"",style:{width:"120px"},onChange:$},{default:s(()=>[t(r,{value:""},{default:s(()=>e[31]||(e[31]=[i("全部")])),_:1,__:[31]}),t(r,{value:"active"},{default:s(()=>e[32]||(e[32]=[i("进行中")])),_:1,__:[32]}),t(r,{value:"completed"},{default:s(()=>e[33]||(e[33]=[i("已完成")])),_:1,__:[33]}),t(r,{value:"paused"},{default:s(()=>e[34]||(e[34]=[i("已暂停")])),_:1,__:[34]}),t(r,{value:"terminated"},{default:s(()=>e[35]||(e[35]=[i("已终止")])),_:1,__:[35]})]),_:1},8,["value"]),e[41]||(e[41]=n("span",{class:"filter-label"},"来源:",-1)),t(y,{value:_.source,"onUpdate:value":e[1]||(e[1]=a=>_.source=a),placeholder:"全部来源","allow-clear":"",style:{width:"120px"},onChange:$},{default:s(()=>[t(r,{value:""},{default:s(()=>e[36]||(e[36]=[i("全部")])),_:1,__:[36]}),t(r,{value:"requirement"},{default:s(()=>e[37]||(e[37]=[i("需求池")])),_:1,__:[37]}),t(r,{value:"external"},{default:s(()=>e[38]||(e[38]=[i("外部委托")])),_:1,__:[38]}),t(r,{value:"internal"},{default:s(()=>e[39]||(e[39]=[i("内部发起")])),_:1,__:[39]})]),_:1},8,["value"]),e[42]||(e[42]=n("span",{class:"filter-label"},"搜索:",-1)),t(Y,{value:_.keyword,"onUpdate:value":e[2]||(e[2]=a=>_.keyword=a),placeholder:"搜索项目名称或关键词",style:{width:"300px"},"allow-clear":"",onSearch:$,onChange:$},{suffix:s(()=>[t(j(Ze))]),_:1},8,["value"])])]),n("div",$e," 📊 统计概览: 总计"+p(O.value.total)+"个 | 进行中"+p(O.value.active)+"个 | 已完成"+p(O.value.completed)+"个 | 暂停"+p(O.value.paused)+"个 | 已终止"+p(O.value.terminated)+"个 ",1)]),n("div",Ye,[(m(!0),x(q,null,I(K.value,a=>(m(),x("div",{key:a.id,class:"record-card"},[n("div",Pe,[n("div",Be,[e[43]||(e[43]=n("span",{class:"record-icon"},"🔍",-1)),n("span",Fe,p(a.title),1),t(A,{color:ie(a.status),class:"status-tag"},{default:s(()=>[i(p(re(a.status))+" "+p(H(a.status)),1)]),_:2},1032,["color"])])]),n("div",je,[n("span",He," 📅 "+p(a.startDate)+" → "+p(a.status==="completed"?a.endDate:`预计${a.expectedEndDate}`),1),n("span",Ne," 👤 "+p(a.responsible)+"("+p(a.department)+") ",1)]),n("div",Ve,[e[44]||(e[44]=n("div",{class:"section-title"},"🎯 调研目的:",-1)),n("div",We,[n("div",Je,[(m(!0),x(q,null,I(a.stages,w=>(m(),D(A,{key:w,color:"blue",style:{"margin-right":"8px","margin-bottom":"4px"}},{default:s(()=>[i(p(X(w)),1)]),_:2},1024))),128))])])]),n("div",Ge,[e[46]||(e[46]=n("div",{class:"section-title"},"📝 事项记录:",-1)),n("div",Ke,[t(le,{mode:"left"},{default:s(()=>[(m(!0),x(q,null,I(xe(a),w=>(m(),D(L,{key:w.id,color:"blue"},{default:s(()=>[n("div",Xe,[n("div",et,[n("span",tt,p(w.time),1),n("span",st,p(w.user),1)]),n("div",at,p(w.content),1),w.attachments&&w.attachments.length>0?(m(),x("div",lt,[e[45]||(e[45]=n("div",{class:"attachment-label"},"📎 附件：",-1)),n("div",nt,[(m(!0),x(q,null,I(w.attachments,J=>(m(),x("a",{key:J.id,onClick:Tt=>pe(J),class:"attachment-link"},p(J.name),9,ot))),128))])])):M("",!0)])]),_:2},1024))),128)),a.items&&a.items.length>3?(m(),D(L,{key:0,color:"gray"},{default:s(()=>[n("a",{onClick:w=>te(a.id)},"查看更多事项…",8,it)]),_:2},1024)):M("",!0)]),_:2},1024)])]),n("div",rt,[t(u,{size:"small",type:"primary",onClick:w=>te(a.id)},{default:s(()=>e[47]||(e[47]=[i("📋 查看详情")])),_:2,__:[47]},1032,["onClick"]),a.status!=="terminated"?(m(),D(u,{key:0,size:"small",onClick:w=>we(a.id)},{default:s(()=>e[48]||(e[48]=[i("📝 更新状态")])),_:2,__:[48]},1032,["onClick"])):M("",!0),a.status==="completed"?(m(),D(u,{key:1,size:"small",type:"default"},{default:s(()=>e[49]||(e[49]=[i("➡️ 转为立项")])),_:1,__:[49]})):M("",!0),a.status!=="terminated"?(m(),D(u,{key:2,size:"small",type:"link",onClick:w=>ue(a.id),class:"add-item-action"},{default:s(()=>e[50]||(e[50]=[i(" ➕ 添加调研事项 ")])),_:2,__:[50]},1032,["onClick"])):M("",!0)])]))),128)),n("div",ut,[t(Ce,{current:k.page,"onUpdate:current":e[3]||(e[3]=a=>k.page=a),"page-size":k.size,"onUpdate:pageSize":e[4]||(e[4]=a=>k.size=a),total:k.total,"page-size-options":["10","20","50"],"show-size-changer":"","show-quick-jumper":"","show-total":"",onChange:ke,onShowSizeChange:De},null,8,["current","page-size","total"])])]),t(F,{open:h.visible,"onUpdate:open":e[16]||(e[16]=a=>h.visible=a),title:"➕ 新建调研记录",width:"700px",onCancel:ve,onOk:ye},{default:s(()=>[t(W,{model:o,"label-col":{span:5},"wrapper-col":{span:19}},{default:s(()=>[t(f,{label:"调研标题",required:""},{default:s(()=>[t(ne,{value:o.title,"onUpdate:value":e[5]||(e[5]=a=>o.title=a),placeholder:"请输入调研项目标题，如：REQ001-智能水质监测系统调研",maxlength:100,"show-count":""},null,8,["value"])]),_:1}),t(f,{label:"需求来源"},{default:s(()=>[t(P,{value:o.sourceType,"onUpdate:value":e[6]||(e[6]=a=>o.sourceType=a),onChange:_e},{default:s(()=>[t(v,{value:"requirement"},{default:s(()=>e[51]||(e[51]=[i("需求池")])),_:1,__:[51]}),t(v,{value:"internal"},{default:s(()=>e[52]||(e[52]=[i("内部发起")])),_:1,__:[52]}),t(v,{value:"external"},{default:s(()=>e[53]||(e[53]=[i("外部委托")])),_:1,__:[53]})]),_:1},8,["value"]),n("div",dt,[o.sourceType==="requirement"?(m(),D(y,{key:0,value:o.sourceRequirement,"onUpdate:value":e[7]||(e[7]=a=>o.sourceRequirement=a),placeholder:"请选择需求池中的需求",style:{width:"100%"},"show-search":"","filter-option":!1,onSearch:ge},{default:s(()=>[(m(!0),x(q,null,I(Q.value,a=>(m(),D(r,{key:a.id,value:a.id},{default:s(()=>[n("div",pt,[n("span",mt,p(a.title),1),n("span",ct,p(a.category),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])):(m(),D(ne,{key:1,value:o.sourceDescription,"onUpdate:value":e[8]||(e[8]=a=>o.sourceDescription=a),placeholder:o.sourceType==="internal"?"请填写内部发起部门或人员":"请填写外部委托单位或项目",maxlength:100,"show-count":""},null,8,["value","placeholder"]))])]),_:1}),t(B,{gutter:16},{default:s(()=>[t(b,{span:12},{default:s(()=>[t(f,{label:"负责人","label-col":{span:10},"wrapper-col":{span:14}},{default:s(()=>[t(y,{value:o.responsible,"onUpdate:value":e[9]||(e[9]=a=>o.responsible=a)},{default:s(()=>[t(r,{value:"张三"},{default:s(()=>e[54]||(e[54]=[i("张三")])),_:1,__:[54]}),t(r,{value:"李四"},{default:s(()=>e[55]||(e[55]=[i("李四")])),_:1,__:[55]}),t(r,{value:"王五"},{default:s(()=>e[56]||(e[56]=[i("王五")])),_:1,__:[56]}),t(r,{value:"赵六"},{default:s(()=>e[57]||(e[57]=[i("赵六")])),_:1,__:[57]})]),_:1},8,["value"])]),_:1})]),_:1}),t(b,{span:12},{default:s(()=>[t(f,{label:"所属部门","label-col":{span:10},"wrapper-col":{span:14}},{default:s(()=>[t(y,{value:o.department,"onUpdate:value":e[10]||(e[10]=a=>o.department=a)},{default:s(()=>[t(r,{value:"技术部"},{default:s(()=>e[58]||(e[58]=[i("技术部")])),_:1,__:[58]}),t(r,{value:"工艺部"},{default:s(()=>e[59]||(e[59]=[i("工艺部")])),_:1,__:[59]}),t(r,{value:"运维部"},{default:s(()=>e[60]||(e[60]=[i("运维部")])),_:1,__:[60]}),t(r,{value:"市场部"},{default:s(()=>e[61]||(e[61]=[i("市场部")])),_:1,__:[61]})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(B,{gutter:16},{default:s(()=>[t(b,{span:12},{default:s(()=>[t(f,{label:"开始时间","label-col":{span:10},"wrapper-col":{span:14}},{default:s(()=>[t(N,{value:o.startDate,"onUpdate:value":e[11]||(e[11]=a=>o.startDate=a),placeholder:"选择开始时间",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(b,{span:12},{default:s(()=>[t(f,{label:"预计完成","label-col":{span:10},"wrapper-col":{span:14}},{default:s(()=>[t(N,{value:o.expectedEndDate,"onUpdate:value":e[12]||(e[12]=a=>o.expectedEndDate=a),placeholder:"选择预计完成时间",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),t(f,{label:"调研阶段",required:""},{default:s(()=>[n("div",ft,[e[68]||(e[68]=n("p",{class:"stage-tip"},"💡 可自由组合选择调研阶段，支持单选或多选：",-1)),t(Re,{value:o.stages,"onUpdate:value":e[13]||(e[13]=a=>o.stages=a),class:"stage-checkboxes"},{default:s(()=>[t(B,{gutter:[16,16]},{default:s(()=>[t(b,{span:8},{default:s(()=>[t(z,{value:"analysis",class:"stage-checkbox"},{default:s(()=>e[62]||(e[62]=[n("span",{class:"stage-icon"},"📋",-1),n("span",{class:"stage-text"},"需求分析",-1)])),_:1,__:[62]})]),_:1}),t(b,{span:8},{default:s(()=>[t(z,{value:"technical",class:"stage-checkbox"},{default:s(()=>e[63]||(e[63]=[n("span",{class:"stage-icon"},"🔍",-1),n("span",{class:"stage-text"},"技术调研",-1)])),_:1,__:[63]})]),_:1}),t(b,{span:8},{default:s(()=>[t(z,{value:"design",class:"stage-checkbox"},{default:s(()=>e[64]||(e[64]=[n("span",{class:"stage-icon"},"📐",-1),n("span",{class:"stage-text"},"方案设计",-1)])),_:1,__:[64]})]),_:1}),t(b,{span:8},{default:s(()=>[t(z,{value:"cost",class:"stage-checkbox"},{default:s(()=>e[65]||(e[65]=[n("span",{class:"stage-icon"},"💰",-1),n("span",{class:"stage-text"},"成本评估",-1)])),_:1,__:[65]})]),_:1}),t(b,{span:8},{default:s(()=>[t(z,{value:"risk",class:"stage-checkbox"},{default:s(()=>e[66]||(e[66]=[n("span",{class:"stage-icon"},"⚠️",-1),n("span",{class:"stage-text"},"风险分析",-1)])),_:1,__:[66]})]),_:1}),t(b,{span:8},{default:s(()=>[t(z,{value:"market",class:"stage-checkbox"},{default:s(()=>e[67]||(e[67]=[n("span",{class:"stage-icon"},"📈",-1),n("span",{class:"stage-text"},"市场调研",-1)])),_:1,__:[67]})]),_:1})]),_:1})]),_:1},8,["value"])])]),_:1}),t(f,{label:"优先级"},{default:s(()=>[t(P,{value:o.priority,"onUpdate:value":e[14]||(e[14]=a=>o.priority=a)},{default:s(()=>[t(v,{value:"high"},{default:s(()=>e[69]||(e[69]=[i("🔴 高优先级")])),_:1,__:[69]}),t(v,{value:"medium"},{default:s(()=>e[70]||(e[70]=[i("🟡 中优先级")])),_:1,__:[70]}),t(v,{value:"low"},{default:s(()=>e[71]||(e[71]=[i("🟢 低优先级")])),_:1,__:[71]})]),_:1},8,["value"])]),_:1}),t(f,{label:"调研描述"},{default:s(()=>[t(V,{value:o.description,"onUpdate:value":e[15]||(e[15]=a=>o.description=a),placeholder:"请简要描述调研目标、背景和预期成果...",rows:3,maxlength:500,"show-count":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),t(F,{open:U.visible,"onUpdate:open":e[23]||(e[23]=a=>U.visible=a),title:"➕ 添加调研事项",width:"600px",onCancel:ee,onOk:de},{default:s(()=>[t(W,{model:d,"label-col":{span:6},"wrapper-col":{span:18}},{default:s(()=>[t(f,{label:"事项内容",required:""},{default:s(()=>[t(V,{value:d.content,"onUpdate:value":e[17]||(e[17]=a=>d.content=a),rows:3,placeholder:"请简要描述调研事项内容...",maxlength:200,"show-count":""},null,8,["value"])]),_:1}),t(B,{gutter:16},{default:s(()=>[t(b,{span:8},{default:s(()=>[t(f,{label:"日期",required:""},{default:s(()=>[t(N,{value:d.date,"onUpdate:value":e[18]||(e[18]=a=>d.date=a),placeholder:"选择日期",style:{width:"100%"},"disabled-date":me,format:"YYYY-MM-DD"},null,8,["value"])]),_:1})]),_:1}),t(b,{span:8},{default:s(()=>[t(f,{label:"时刻"},{default:s(()=>[t(Ue,{value:d.time,"onUpdate:value":e[19]||(e[19]=a=>d.time=a),placeholder:"选择时刻(可选)",style:{width:"100%"},format:"HH:mm","minute-step":15,"allow-clear":""},null,8,["value"])]),_:1})]),_:1}),t(b,{span:8},{default:s(()=>[t(f,{label:"负责人"},{default:s(()=>[t(y,{value:d.responsible,"onUpdate:value":e[20]||(e[20]=a=>d.responsible=a)},{default:s(()=>[t(r,{value:"张三"},{default:s(()=>e[72]||(e[72]=[i("张三")])),_:1,__:[72]}),t(r,{value:"李四"},{default:s(()=>e[73]||(e[73]=[i("李四")])),_:1,__:[73]}),t(r,{value:"王五"},{default:s(()=>e[74]||(e[74]=[i("王五")])),_:1,__:[74]})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(f,{label:"事项类型"},{default:s(()=>[t(P,{value:d.type,"onUpdate:value":e[21]||(e[21]=a=>d.type=a)},{default:s(()=>[t(v,{value:"analysis"},{default:s(()=>e[75]||(e[75]=[i("需求分析")])),_:1,__:[75]}),t(v,{value:"technical"},{default:s(()=>e[76]||(e[76]=[i("技术调研")])),_:1,__:[76]}),t(v,{value:"design"},{default:s(()=>e[77]||(e[77]=[i("方案设计")])),_:1,__:[77]}),t(v,{value:"cost"},{default:s(()=>e[78]||(e[78]=[i("成本评估")])),_:1,__:[78]}),t(v,{value:"risk"},{default:s(()=>e[79]||(e[79]=[i("风险分析")])),_:1,__:[79]}),t(v,{value:"market"},{default:s(()=>e[80]||(e[80]=[i("市场调研")])),_:1,__:[80]}),t(v,{value:"other"},{default:s(()=>e[81]||(e[81]=[i("其他")])),_:1,__:[81]})]),_:1},8,["value"])]),_:1}),t(f,{label:"关联文档"},{default:s(()=>[t(Se,{"file-list":d.attachments,"onUpdate:fileList":e[22]||(e[22]=a=>d.attachments=a),multiple:!0,"show-upload-list":!0,"before-upload":ce},{default:s(()=>[t(u,null,{default:s(()=>[t(j(Qe)),e[82]||(e[82]=i(" 📎 上传文件 (支持 PDF、Word、Excel、图片) "))]),_:1,__:[82]})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),t(F,{open:S.visible,"onUpdate:open":e[26]||(e[26]=a=>S.visible=a),title:"📝 更新调研状态",width:"500px",onCancel:se,onOk:be},{default:s(()=>[t(W,{model:g,"label-col":{span:6},"wrapper-col":{span:18}},{default:s(()=>[t(f,{label:"调研状态",required:""},{default:s(()=>[t(P,{value:g.status,"onUpdate:value":e[24]||(e[24]=a=>g.status=a)},{default:s(()=>[t(v,{value:"active"},{default:s(()=>e[83]||(e[83]=[i("进行中")])),_:1,__:[83]}),t(v,{value:"completed"},{default:s(()=>e[84]||(e[84]=[i("已完成")])),_:1,__:[84]}),t(v,{value:"paused"},{default:s(()=>e[85]||(e[85]=[i("已暂停")])),_:1,__:[85]}),t(v,{value:"terminated"},{default:s(()=>e[86]||(e[86]=[i("已终止")])),_:1,__:[86]})]),_:1},8,["value"])]),_:1}),t(f,{label:"备注"},{default:s(()=>[t(V,{value:g.remark,"onUpdate:value":e[25]||(e[25]=a=>g.remark=a),rows:3,placeholder:"如有说明请填写...",maxlength:200,"show-count":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),t(F,{open:R.visible,"onUpdate:open":e[27]||(e[27]=a=>R.visible=a),title:"📋 调研详情",width:"700px",onCancel:e[28]||(e[28]=a=>R.visible=!1),footer:null},{default:s(()=>[R.record?(m(),x("div",vt,[n("h3",null,p(R.record.title),1),n("div",_t,[(m(!0),x(q,null,I(R.record.stages,a=>(m(),D(A,{key:a,color:"blue",style:{"margin-right":"8px"}},{default:s(()=>[i(p(X(a)),1)]),_:2},1024))),128))]),t(le,{mode:"left"},{default:s(()=>[(m(!0),x(q,null,I(Te(R.record),a=>(m(),D(L,{key:a.id},{default:s(()=>[n("div",gt,[n("span",yt,p(a.time),1),n("span",wt,p(a.user),1),n("span",bt,p(H(a.status)),1),n("div",Dt,p(a.content),1)])]),_:2},1024))),128))]),_:1})])):M("",!0)]),_:1},8,["open"])]),_:1})}}},Et=Ee(kt,[["__scopeId","data-v-c7ec61c0"]]);export{Et as default};
