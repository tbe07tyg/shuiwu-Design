# 会议通知功能开发说明

## 功能概述

在已安排会议页面添加了"一键通知"功能，支持向参会人员发送短信通知，提高会议组织效率。

## 核心功能

### 1. 一键通知按钮
- **位置**：已安排会议页面的操作按钮组
- **显示条件**：仅在会议状态为 `scheduled`（已安排）时显示
- **功能**：点击后打开短信通知弹窗

### 2. 短信通知弹窗
包含以下功能模块：

#### 会议信息展示
- 项目名称
- 会议时间
- 会议地点  
- 会议形式（现场/线上/混合）

#### 通知方式选择
- 短信通知（已实现）
- 邮件通知（预留，暂未开放）
- 微信通知（预留，暂未开放）

#### 通知对象选择
- **会议主持人**：支持多选，来源于会议安排时选择的主持人
- **参会专家**：支持多选，来源于会议安排时选择的专家
- **便捷操作**：提供"全选"和"清空"快捷按钮

#### 通知内容编辑
- **自动生成**：系统根据会议信息自动生成标准通知内容
- **可自定义**：用户可以修改通知内容
- **包含信息**：项目名称、编号、时间、地点、形式、说明

#### 提醒设置
- **立即发送**：默认选中，立即向参会人员发送通知
- **会议前提醒**：可自定义提醒时间
  - 支持数值输入（1-365）
  - 支持时间单位选择（小时/天）
  - 示例：会议前2小时提醒、会议前1天提醒等

## 技术实现

### 1. 数据结构

```javascript
// 会议数据增加通知相关字段
{
  notifyLoading: false,     // 通知发送加载状态
  lastNotifyTime: null      // 最后通知时间
}

// 通知表单数据
notifyForm: {
  methods: ['sms'],         // 通知方式
  selectedHosts: {},        // 选中的主持人
  selectedExperts: {},      // 选中的专家
  content: '',             // 通知内容
  sendImmediately: true,   // 立即发送
  enableReminder: false,   // 启用提醒
  reminderValue: 1,        // 提醒数值
  reminderUnit: 'hours'    // 提醒单位（hours/days）
}
```

### 2. 核心方法

- `sendNotification()` - 打开通知弹窗
- `resetNotifyForm()` - 重置通知表单
- `generateDefaultNotifyContent()` - 生成默认通知内容
- `selectAllTargets()` - 全选通知对象
- `clearAllTargets()` - 清空通知对象
- `handleSendNotification()` - 发送通知
- `getMeetingTypeText()` - 获取会议类型文本
- `getMeetingTypeColor()` - 获取会议类型颜色

### 3. 用户体验优化

- **加载状态**：发送通知时显示loading动画
- **智能默认**：默认选中所有参会人员
- **历史记录**：显示上次通知时间
- **实时反馈**：发送成功后显示具体发送人数

## 使用流程

1. 在已安排会议页面找到需要通知的会议
2. 点击"一键通知"按钮
3. 系统自动填充会议信息和通知内容
4. 确认或修改通知对象
5. 可选择性修改通知内容
6. 点击确定发送通知
7. 系统显示发送结果并记录通知时间

## 扩展计划

1. **邮件通知**：集成邮件发送服务
2. **微信通知**：集成企业微信或微信公众号
3. **定时提醒**：已实现自定义时间提醒功能，支持小时和天为单位
4. **通知模板**：提供多种通知内容模板
5. **发送记录**：记录详细的通知发送历史

## 注意事项

1. 当前为模拟实现，实际项目需要对接真实的短信服务API
2. 通知内容支持自定义，但建议保留关键会议信息
3. 频繁发送通知可能产生费用，建议适度使用
4. 需要确保参会人员联系方式的准确性 