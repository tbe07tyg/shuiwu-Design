# ✅ 项目验收页面设计文档 v1.0

## 📄 页面基础信息

- **页面名称**: 项目验收
- **路由地址**: `/implementation/acceptance`
- **组件路径**: `src/views/implementation/acceptance/index.vue`
- **设计版本**: v1.0
- **更新时间**: 2025-01-17

## 🎨 UI布局草图

### 整体页面布局结构

```
┌─────────────────────────────────────────────────────────────────┐
│                    ✅ 项目验收页面容器                           │
│                   (全屏宽度，背景 #f5f7fa)                       │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                📊 页面头部区域                          │   │
│  │  ┌─────────────────────┐  ┌─────────────────────────┐  │   │
│  │  │ ✅ 项目验收          │  │ [选择项目_______▼]      │  │   │
│  │  │ 管理项目验收材料，    │  │ [🔴对接OA流程]         │  │   │
│  │  │ 组织专家评审，结题    │  │                        │  │   │
│  │  │ 归档，集成OA流程      │  │                        │  │   │
│  │  └─────────────────────┘  └─────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                📁 验收材料管理区域                       │   │
│  │                                                         │   │
│  │  ┌─────────────┬─────────────┬─────────────────────┐   │   │
│  │  │材料名称      │模板下载      │文件上传              │   │   │
│  │  ├─────────────┼─────────────┼─────────────────────┤   │   │
│  │  │技术报告      │[📥下载模板] │[📁选择文件] ✅已上传 │   │   │
│  │  ├─────────────┼─────────────┼─────────────────────┤   │   │
│  │  │任务决算书    │[📥下载模板] │[📁选择文件] ⏳待上传 │   │   │
│  │  ├─────────────┼─────────────┼─────────────────────┤   │   │
│  │  │结题报告PPT   │[📥下载模板] │[📁选择文件] ⏳待上传 │   │   │
│  │  ├─────────────┼─────────────┼─────────────────────┤   │   │
│  │  │验收证书      │[📥下载模板] │[📁选择文件] ⏳待上传 │   │   │
│  │  ├─────────────┼─────────────┼─────────────────────┤   │   │
│  │  │其他验收文档  │[📥下载模板] │[📁选择文件] ⏳待上传 │   │   │
│  │  └─────────────┴─────────────┴─────────────────────┘   │   │
│  │                                                         │   │
│  │  📊 材料完成度: ▓▓░░░ 20% (1/5项已完成)                │   │
│  │                                                         │   │
│  │  [📋 批量下载模板] [📁 批量上传材料] [✅ 验证完整性]    │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                👨‍🎓 专家评审管理区域                      │   │
│  │                                                         │   │
│  │  ┌─────────┬──────────────────┬─────┬─────┬─────────┐   │   │
│  │  │专家姓名  │评审意见           │打分  │状态  │操作      │   │   │
│  │  ├─────────┼──────────────────┼─────┼─────┼─────────┤   │   │
│  │  │张三教授  │项目技术水平较高， │92分 │✅完成│[👁️查看] │   │   │
│  │  │         │建议通过验收       │     │     │[📝编辑] │   │   │
│  │  ├─────────┼──────────────────┼─────┼─────┼─────────┤   │   │
│  │  │李四教授  │[填写评审意见____] │[__] │⏳待评│[📝编辑] │   │   │
│  │  │         │                  │     │审   │[❌删除] │   │   │
│  │  ├─────────┼──────────────────┼─────┼─────┼─────────┤   │   │
│  │  │王五教授  │[填写评审意见____] │[__] │⏳待评│[📝编辑] │   │   │
│  │  │         │                  │     │审   │[❌删除] │   │   │
│  │  └─────────┴──────────────────┴─────┴─────┴─────────┘   │   │
│  │                                                         │   │
│  │  📊 评审进度: 1/3专家已完成    平均分: 92分              │   │
│  │                                                         │   │
│  │  [➕ 添加专家] [📧 发送邀请] [📊 评审统计] [📋 导出报告]│   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                📦 结题归档管理区域                       │   │
│  │                                                         │   │
│  │  ℹ️ 结题归档与OA流程同步                                │   │
│  │                                                         │   │
│  │  归档准备检查:                                          │   │
│  │  ✅ 验收材料完整性: 已通过                              │   │
│  │  ✅ 专家评审完成: 已完成                                │   │
│  │  ✅ 财务结算完成: 已完成                                │   │
│  │  ⏳ OA流程审批: 待审批                                  │   │
│  │                                                         │   │
│  │  归档信息配置:                                          │   │
│  │  项目结题日期: [2024-12-15_____] 📅                    │   │
│  │  归档负责人: [张三____________] 👤                      │   │
│  │  归档位置: [项目档案室_______] 📍                       │   │
│  │  备注说明: [项目顺利完成，技术指标达标_______________] │   │
│  │                                                         │   │
│  │  🔴 归档操作将触发OA流程                                │   │
│  │                                                         │   │
│  │           [📦 提交归档申请] [💾 保存草稿]                │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

### 专家评审详细设计

```
┌─────────────────────────────────────────────────────────────────┐
│                    👨‍🎓 专家评审管理详细界面                     │
│                                                                 │
│  专家信息配置                                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 专家姓名: [张三教授___________________]                  │   │
│  │ 工作单位: [某某大学___________________]                  │   │
│  │ 职务职称: [教授/博导__________________]                  │   │
│  │ 联系方式: [13812345678_______________]                  │   │
│  │ 邮箱地址: [zhangsan@xxx.edu.cn_______]                  │   │
│  │ 专业领域: [水处理技术_________________]                  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  评审内容                                                       │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 技术评审 (权重40%):                                     │   │
│  │ ┌─────────────────────────────────────────────────┐   │   │
│  │ │ 技术方案合理性: [优秀_____________▼] 分数: [95]  │   │   │
│  │ │ 技术创新程度: [良好_______________▼] 分数: [85]    │   │   │
│  │ │ 技术实现质量: [优秀_______________▼] 分数: [90]    │   │   │
│  │ └─────────────────────────────────────────────────┘   │   │
│  │                                                         │   │
│  │ 成果评审 (权重30%):                                     │   │
│  │ ┌─────────────────────────────────────────────────┐   │   │
│  │ │ 预期目标完成度: [优秀_____________▼] 分数: [92]    │   │   │
│  │ │ 成果应用价值: [良好_______________▼] 分数: [88]      │   │   │
│  │ │ 文档规范程度: [优秀_______________▼] 分数: [94]      │   │   │
│  │ └─────────────────────────────────────────────────┘   │   │
│  │                                                         │   │
│  │ 管理评审 (权重30%):                                     │   │
│  │ ┌─────────────────────────────────────────────────┐   │   │
│  │ │ 项目管理规范: [优秀_______________▼] 分数: [91]      │   │   │
│  │ │ 团队协作效果: [良好_______________▼] 分数: [87]      │   │   │
│  │ │ 进度控制能力: [优秀_______________▼] 分数: [93]      │   │   │
│  │ └─────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  综合评审意见                                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 评审意见:                                               │   │
│  │ ┌─────────────────────────────────────────────────┐   │   │
│  │ │ 该项目技术方案设计合理，实施过程规范，达到了      │   │   │
│  │ │ 预期的技术指标和应用效果。项目团队在水质监测    │   │   │
│  │ │ 技术方面有所创新，建议通过验收。同时建议进一    │   │   │
│  │ │ 步完善系统的稳定性和可维护性。                  │   │   │
│  │ │ _________________________________________ │   │   │
│  │ └─────────────────────────────────────────────────┘   │   │
│  │                                                         │   │
│  │ 验收建议: ◉ 建议通过  ○ 有条件通过  ○ 不建议通过       │   │
│  │                                                         │   │
│  │ 综合得分: [91] 分 (系统自动计算)                        │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  专家签名确认                                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 评审日期: [2024-12-10] 📅                              │   │
│  │ 专家签名: [📝 电子签名] 或 [📷 上传手写签名]            │   │
│  │ 确认状态: ⏳ 待确认                                     │   │
│  │                                                         │   │
│  │ [📧 发送评审邀请] [💾 保存评审] [✅ 提交评审]           │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

### 归档流程详细设计

```
┌─────────────────────────────────────────────────────────────────┐
│                    📦 项目结题归档流程界面                       │
│                                                                 │
│  归档前置条件检查                                               │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 📋 归档准备情况检查                                     │   │
│  │                                                         │   │
│  │ ✅ 1. 验收材料完整性检查                                │   │
│  │    • 技术报告: ✅ 已上传                                │   │
│  │    • 任务决算书: ✅ 已上传                              │   │
│  │    • 结题报告PPT: ✅ 已上传                             │   │
│  │    • 验收证书: ⏳ 待上传                                │   │
│  │    • 其他文档: ✅ 已上传                                │   │
│  │                                                         │   │
│  │ ✅ 2. 专家评审完成情况                                  │   │
│  │    • 评审专家数量: 3人                                  │   │
│  │    • 已完成评审: 3人                                    │   │
│  │    • 平均评分: 91分                                     │   │
│  │    • 评审结论: 建议通过验收                             │   │
│  │                                                         │   │
│  │ ✅ 3. 财务结算状态                                      │   │
│  │    • 项目资金使用: 100%                                 │   │
│  │    • 财务审计: 已完成                                   │   │
│  │    • 结算状态: 已结算                                   │   │
│  │                                                         │   │
│  │ ⏳ 4. OA流程审批                                        │   │
│  │    • 验收申请: 待提交                                   │   │
│  │    • 部门审批: 待审批                                   │   │
│  │    • 归档审批: 待审批                                   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  归档信息配置                                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 📅 时间信息                                             │   │
│  │    项目开始时间: 2024-01-15                             │   │
│  │    项目结束时间: [2024-12-15_______] 📅                │   │
│  │    验收完成时间: [2024-12-10_______] 📅                │   │
│  │    归档时间: [2024-12-20_______] 📅                    │   │
│  │                                                         │   │
│  │ 👤 人员信息                                             │   │
│  │    项目负责人: 张三                                     │   │
│  │    归档负责人: [李四_______________] 👤                │   │
│  │    验收负责人: [王五_______________] 👤                │   │
│  │                                                         │   │
│  │ 📍 归档位置                                             │   │
│  │    归档位置: [项目档案室___________] 📍                │   │
│  │    存储编号: [PRJ2024001__________] 🏷️                │   │
│  │    保存期限: [永久保存_____________] 📚                │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  归档材料清单                                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 📄 归档文档列表                                         │   │
│  │                                                         │   │
│  │ ☑️ 立项批复文件        ☑️ 项目实施方案                  │   │
│  │ ☑️ 技术研究报告        ☑️ 测试验证报告                  │   │
│  │ ☑️ 专家评审意见        ☑️ 验收证书文件                  │   │
│  │ ☑️ 财务结算文件        ☑️ 知识产权文件                  │   │
│  │ ☑️ 项目总结报告        ☑️ 推广应用计划                  │   │
│  │                                                         │   │
│  │ 📊 归档统计: 共计文档 24份，总大小 156MB                │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  OA流程集成                                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 🔄 OA系统归档流程                                       │   │
│  │                                                         │   │
│  │ 流程状态: ⏳ 待提交                                     │   │
│  │ 预生成单号: OA2024121501                               │   │
│  │ 预计处理时间: 3-5个工作日                               │   │
│  │                                                         │   │
│  │ 审批流程:                                               │   │
│  │ 1. 项目负责人提交 → 2. 部门主管审批 → 3. 档案室确认    │   │
│  │                                                         │   │
│  │ [🔗 查看OA流程] [📋 预览归档申请]                       │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  操作确认                                                       │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ ⚠️ 归档确认: 项目归档后将无法修改相关信息               │   │
│  │                                                         │   │
│  │ 归档备注:                                               │   │
│  │ ┌─────────────────────────────────────────────────┐   │   │
│  │ │ 项目已顺利完成验收，所有材料齐全，符合归档要求。│   │   │
│  │ │ 建议后续加强技术成果的推广应用。                │   │   │
│  │ │ ________________________________________ │   │   │
│  │ └─────────────────────────────────────────────────┘   │   │
│  │                                                         │   │
│  │        [📦 确认归档] [💾 保存草稿] [📧 发送通知]        │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

## 📐 设计规格

### 🌈 色彩方案
- **页面背景**: `#f5f7fa` (浅灰蓝)
- **卡片背景**: `#ffffff` (纯白)
- **主色调**: `#234fa2` (深蓝色)
- **OA集成标识**: `#ff4d4f` (红色) - 突出显示OA对接功能
- **完成状态**: `#52c41a` (绿色)
- **进行状态**: `#1890ff` (蓝色)
- **待办状态**: `#faad14` (橙色)
- **专家评审**: `#722ed1` (紫色)

### 📏 尺寸规格
- **页面内边距**: 24px
- **卡片圆角**: 12px
- **表格行高**: 54px
- **按钮高度**: 32px
- **进度条高度**: 8px
- **评分输入框**: 宽度 80px

### 📝 字体规格
- **页面标题**: 24px, font-weight: bold
- **页面描述**: 14px, color: #64748b
- **卡片标题**: 18px, font-weight: 600
- **表格内容**: 14px
- **评分数字**: 16px, font-weight: 600
- **状态标签**: 12px

### 🎨 特殊样式设计
- **OA标签**: 红色背景，白色文字，圆角标签
- **完成度进度条**: 绿色渐变填充
- **专家评审卡片**: 紫色边框，专业感设计
- **归档检查项**: 绿色勾选图标 + 状态文字

## ⚡ 交互逻辑

### 🔄 页面内交互

1. **项目选择交互**
   - 下拉选择当前验收的项目
   - 切换项目时加载对应验收数据
   - 未选择项目时禁用操作功能
   - 项目验收状态展示

2. **材料管理交互**
   - 模板下载功能
   - 文件上传和验证
   - 完整性检查和提示
   - 批量操作支持

3. **专家评审交互**
   - 动态添加和删除专家
   - 评审意见在线编辑
   - 实时评分计算
   - 评审进度跟踪

### 🚀 专家评审功能

1. **专家管理**
   - 专家信息配置
   - 评审邀请发送
   - 评审状态跟踪
   - 评审结果统计

2. **评审过程**
   - 分维度评分机制
   - 综合意见撰写
   - 电子签名确认
   - 评审报告生成

### 📦 归档管理功能

1. **归档准备**
   - 前置条件自动检查
   - 归档材料清单核对
   - 归档信息配置
   - 完整性验证

2. **OA流程集成**
   - 自动生成归档申请
   - 审批流程实时跟踪
   - 审批结果同步
   - 归档状态更新

## 🚀 页面间跳转

### 跳转路径设计

1. **进度管理跳转**
   - 跳转到进度监控页面：`/implementation/progress?projectId=P001`
   - 查看项目完成情况
   - 确认验收条件

2. **文档管理跳转**
   - 跳转到文档库：`/documents?projectId=P001&type=acceptance`
   - 管理验收相关文档
   - 文档版本控制

3. **OA系统跳转**
   - 跳转到OA归档流程（外部）
   - 新窗口打开OA界面
   - 传递归档申请单号

### 数据传递机制
- 通过 `query` 参数传递项目ID
- 通过 `store` 保存验收状态
- 通过 `localStorage` 缓存评审数据
- 通过 `API` 与OA系统交互

## 📱 响应式设计

### 大屏设备 (≥1200px)
- 三区域完整展示
- 表格详细信息显示
- 所有操作按钮展开

### 中屏设备 (768px - 1199px)
- 上下布局排列
- 表格部分列隐藏
- 操作按钮部分收起

### 小屏设备 (≤767px)
- 卡片式堆叠布局
- 表格改为列表形式
- 操作按钮简化

## 🛠️ 技术实现

### 核心技术栈
- **Vue 3** + Composition API
- **Ant Design Vue** 组件库
- **OA API**: RESTful接口集成
- **文件处理**: 文档上传下载
- **电子签名**: 数字签名组件

### 组件架构
1. **主页面** - 布局和数据管理
2. **材料管理组件** - 文件上传下载
3. **专家评审组件** - 评审表单和统计
4. **归档管理组件** - 归档流程和检查

### 关键功能实现

1. **材料完整性检查**
```javascript
// 验收材料完整性验证
const validateMaterials = () => {
  const requiredMaterials = [
    'techReport', 'budgetReport', 'presentationPPT', 
    'acceptanceCert', 'otherDocs'
  ]
  
  const missingMaterials = requiredMaterials.filter(type => 
    !materials.value[type] || !materials.value[type].fileList.length
  )
  
  materialCompleteRate.value = Math.round(
    ((requiredMaterials.length - missingMaterials.length) / requiredMaterials.length) * 100
  )
  
  return {
    isComplete: missingMaterials.length === 0,
    missing: missingMaterials,
    completeRate: materialCompleteRate.value
  }
}
```

2. **专家评审计算**
```javascript
// 专家评审综合评分计算
const calculateReviewScore = (review) => {
  const weights = {
    technical: 0.4,    // 技术评审权重40%
    achievement: 0.3,  // 成果评审权重30%
    management: 0.3    // 管理评审权重30%
  }
  
  const technicalScore = (
    review.technical.rationality * 0.4 +
    review.technical.innovation * 0.3 +
    review.technical.quality * 0.3
  )
  
  const achievementScore = (
    review.achievement.completion * 0.4 +
    review.achievement.value * 0.3 +
    review.achievement.documentation * 0.3
  )
  
  const managementScore = (
    review.management.standard * 0.4 +
    review.management.teamwork * 0.3 +
    review.management.progress * 0.3
  )
  
  return Math.round(
    technicalScore * weights.technical +
    achievementScore * weights.achievement +
    managementScore * weights.management
  )
}
```

3. **OA归档集成**
```javascript
// 提交归档申请到OA系统
const submitArchiveToOA = async () => {
  try {
    // 验证归档前置条件
    const validation = await validateArchiveConditions()
    if (!validation.canArchive) {
      message.error(`归档条件未满足: ${validation.missingConditions.join(', ')}`)
      return
    }
    
    const response = await oaAPI.createArchiveRequest({
      projectId: selectedProject.value,
      materials: archiveMaterials.value,
      reviews: expertReviews.value,
      archiveInfo: archiveConfig.value
    })
    
    archiveStatus.value = {
      submitted: true,
      requestId: response.data.requestId,
      status: 'pending',
      submitTime: new Date().toISOString()
    }
    
    message.success('归档申请已提交到OA系统')
    trackArchiveStatus(response.data.requestId)
  } catch (error) {
    message.error('OA归档申请提交失败')
  }
}
```

### 数据模型设计

```javascript
// 项目验收数据模型
const acceptanceData = {
  projectId: 'P001',                    // 项目ID
  materials: {                          // 验收材料
    techReport: {
      required: true,
      uploaded: true,
      fileName: '技术报告.pdf',
      uploadTime: '2024-12-01T10:00:00Z'
    },
    budgetReport: {
      required: true,
      uploaded: false,
      fileName: null,
      uploadTime: null
    }
  },
  expertReviews: [                      // 专家评审
    {
      id: 'R001',
      expertName: '张三教授',
      institution: '某某大学',
      contact: '13812345678',
      reviewContent: {
        technical: {
          rationality: 95,
          innovation: 85,
          quality: 90
        },
        achievement: {
          completion: 92,
          value: 88,
          documentation: 94
        },
        management: {
          standard: 91,
          teamwork: 87,
          progress: 93
        }
      },
      opinion: '项目技术水平较高，建议通过验收',
      recommendation: 'pass',
      finalScore: 91,
      reviewDate: '2024-12-10',
      status: 'completed'
    }
  ],
  archiveInfo: {                        // 归档信息
    projectEndDate: '2024-12-15',
    acceptanceDate: '2024-12-10',
    archiveDate: '2024-12-20',
    archiveLocation: '项目档案室',
    storageNumber: 'PRJ2024001',
    retentionPeriod: '永久保存',
    archiveManager: '李四',
    oaRequestId: 'OA2024121501'
  },
  status: {                             // 验收状态
    materialComplete: false,
    reviewComplete: true,
    financeComplete: true,
    oaApproved: false,
    archived: false
  }
}
```

## 🎯 用户体验亮点

1. **完整的验收流程**
   - 材料管理一站式服务
   - 专家评审标准化流程
   - 归档管理自动化处理

2. **智能化辅助功能**
   - 材料完整性自动检查
   - 评分自动计算和统计
   - 归档条件智能验证

3. **无缝系统集成**
   - OA流程实时同步
   - 文档自动归档
   - 状态实时跟踪

4. **专业的评审体系**
   - 多维度评分机制
   - 标准化评审模板
   - 电子签名确认

## 📋 待优化项

1. **AI智能辅助**
   - 文档内容自动检查
   - 评审意见智能分析
   - 验收报告自动生成

2. **移动端优化**
   - 专家移动评审
   - 材料移动上传
   - 状态移动查询

3. **高级功能扩展**
   - 视频会议集成
   - 在线评审会议
   - 多语言支持

4. **安全性增强**
   - 材料加密存储
   - 评审权限控制
   - 操作日志审计

## 🔗 关联模块说明

### 上游数据来源
- **进度管理**: 获取项目完成状态
- **付款管理**: 获取财务结算状态
- **合同管理**: 获取合同约定条件

### 下游数据输出
- **档案管理**: 提供归档材料
- **统计分析**: 提供验收统计数据
- **知识库**: 沉淀项目经验

### 外部系统集成
- **OA系统**: 验收和归档流程审批
- **档案系统**: 文档永久存储
- **专家库**: 专家信息和评审历史 