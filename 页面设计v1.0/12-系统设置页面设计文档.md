# ⚙️ 系统设置页面设计文档 v1.0

## 📄 页面基础信息

- **页面名称**: 系统设置
- **路由地址**: `/settings`
- **组件路径**: `src/views/settings/index.vue`
- **设计版本**: v1.0
- **更新时间**: 2025-01-17

## 🎨 UI布局草图

### 整体页面布局结构

```
┌─────────────────────────────────────────────────────────────────┐
│                    ⚙️ 系统设置页面容器                          │
│                   (全屏宽度，背景 #f5f7fa)                       │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                📊 页面头部区域                          │   │
│  │  ┌─────────────────────┐  ┌─────────────────────────┐  │   │
│  │  │ ⚙️ 系统设置         │  │ [💾保存] [🔄重置]      │  │   │
│  │  │ 个性化配置，        │  │ [📋导入] [📤导出]      │  │   │
│  │  │ 权限管理，系统优化   │  │                        │  │   │
│  │  └─────────────────────┘  └─────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                📋 设置导航菜单区域                       │   │
│  │                                                         │   │
│  │  ┌─────────────────────────────────────────────────┐   │   │
│  │  │ [👤 个人设置] [🏢 组织设置] [🔐 安全设置]      │   │   │
│  │  │ [🎨 界面设置] [🔔 通知设置] [🔗 集成设置]      │   │   │
│  │  │ [📊 数据设置] [🛠️ 系统设置] [📚 帮助文档]     │   │   │
│  │  └─────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                👤 个人设置区域 (默认选中)               │   │
│  │                                                         │   │
│  │  基本信息配置:                                          │   │
│  │  ┌─────────────────────────────────────────────────┐   │   │
│  │  │ 头像: [🖼️ 点击上传] 👤 [当前头像缩略图]        │   │   │
│  │  │ 姓名: [张三___________________] 📝             │   │   │
│  │  │ 邮箱: [zhangsan@example.com___] 📧             │   │   │
│  │  │ 电话: [13812345678____________] 📱             │   │   │
│  │  │ 部门: [技术部_________________] 🏢             │   │   │
│  │  │ 职位: [项目经理_______________] 💼             │   │   │
│  │  └─────────────────────────────────────────────────┘   │   │
│  │                                                         │   │
│  │  密码安全:                                              │   │
│  │  ┌─────────────────────────────────────────────────┐   │   │
│  │  │ 当前密码: [••••••••••••••••••] 🔒             │   │   │
│  │  │ 新密码:   [••••••••••••••••••] 🔑             │   │   │
│  │  │ 确认密码: [••••••••••••••••••] ✅             │   │   │
│  │  │ 密码强度: ████░░░░░░ 中等                      │   │   │
│  │  │                                                 │   │   │
│  │  │ 🔐 两步验证: [○ 关闭] [● 开启] [📱绑定手机]   │   │   │
│  │  └─────────────────────────────────────────────────┘   │   │
│  │                                                         │   │
│  │  工作偏好:                                              │   │
│  │  ┌─────────────────────────────────────────────────┐   │   │
│  │  │ 时区设置: [Asia/Shanghai (UTC+8)_______▼]       │   │   │
│  │  │ 语言设置: [简体中文___________________▼]         │   │   │
│  │  │ 日期格式: [YYYY-MM-DD_________________▼]         │   │   │
│  │  │ 时间格式: [24小时制___________________▼]         │   │   │
│  │  │ 工作时间: 从[09:00] 到[18:00] ⏰               │   │   │
│  │  │ 休息日: ☑️周六 ☑️周日 ☐法定节假日           │   │   │
│  │  └─────────────────────────────────────────────────┘   │   │
│  │                                                         │   │
│  │  [💾 保存个人设置] [🔄 重置为默认]                      │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

### 组织设置详细界面

```
┌─────────────────────────────────────────────────────────────────┐
│                    🏢 组织设置管理界面                           │
│                                                                 │
│  组织架构管理:                                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 🏢 华水科技集团                                         │   │
│  │ ├─ 📁 技术研发部                     [👥12人] [✏️编辑] │   │
│  │ │  ├─ 💻 软件开发组   [👥5人]  [👤 组长: 张三]         │   │
│  │ │  ├─ 🔧 硬件开发组   [👥4人]  [👤 组长: 李四]         │   │
│  │ │  └─ 🧪 测试验证组   [👥3人]  [👤 组长: 王五]         │   │
│  │ ├─ 📁 市场销售部                     [👥8人]  [✏️编辑] │   │
│  │ │  ├─ 📈 商务拓展组   [👥4人]  [👤 组长: 赵六]         │   │
│  │ │  └─ 🤝 客户服务组   [👥4人]  [👤 组长: 钱七]         │   │
│  │ ├─ 📁 财务管理部                     [👥5人]  [✏️编辑] │   │
│  │ └─ 📁 行政人事部                     [👥6人]  [✏️编辑] │   │
│  │                                                         │   │
│  │ [➕ 添加部门] [👥 批量导入] [📋 导出架构] [🔄 同步OA]  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  用户权限管理:                                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 角色权限配置:                                           │   │
│  │                                                         │   │
│  │ ┌─────────────────────────────────────────────────┐   │   │
│  │ │ 🎭 超级管理员 (系统管理员)                      │   │   │
│  │ │ ├─ ✅ 系统设置: 完全权限                        │   │   │
│  │ │ ├─ ✅ 用户管理: 完全权限                        │   │   │
│  │ │ ├─ ✅ 数据管理: 完全权限                        │   │   │
│  │ │ └─ ✅ 审计日志: 完全权限                        │   │   │
│  │ │ 分配用户: [张三], [李四] (2人)       [⚙️配置]  │   │   │
│  │ └─────────────────────────────────────────────────┘   │   │
│  │                                                         │   │
│  │ ┌─────────────────────────────────────────────────┐   │   │
│  │ │ 👔 项目管理员 (部门负责人)                      │   │   │
│  │ │ ├─ ✅ 项目管理: 部门权限                        │   │   │
│  │ │ ├─ ✅ 团队管理: 部门权限                        │   │   │
│  │ │ ├─ ❌ 系统设置: 无权限                          │   │   │
│  │ │ └─ 📊 数据查看: 部门数据                        │   │   │
│  │ │ 分配用户: [王五], [赵六] (2人)       [⚙️配置]  │   │   │
│  │ └─────────────────────────────────────────────────┘   │   │
│  │                                                         │   │
│  │ ┌─────────────────────────────────────────────────┐   │   │
│  │ │ 👤 普通用户 (项目成员)                          │   │   │
│  │ │ ├─ ✅ 项目查看: 相关项目                        │   │   │
│  │ │ ├─ ✅ 任务管理: 个人任务                        │   │   │
│  │ │ ├─ ❌ 用户管理: 无权限                          │   │   │
│  │ │ └─ 📊 数据查看: 个人数据                        │   │   │
│  │ │ 分配用户: [钱七], [孙八]... (25人)   [⚙️配置]  │   │   │
│  │ └─────────────────────────────────────────────────┘   │   │
│  │                                                         │   │
│  │ [➕ 新建角色] [📋 批量分配] [📊 权限报告] [🔄 同步AD]│   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  项目分类管理:                                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 📂 项目类型配置:                                        │   │
│  │                                                         │   │
│  │ 🔬 研发类项目:                                          │   │
│  │ ├─ 💻 软件开发  [🎨#1890ff] [流程:研发流程A] [✏️]     │   │
│  │ ├─ 🔧 硬件开发  [🎨#52c41a] [流程:研发流程B] [✏️]     │   │
│  │ └─ 🧪 技术研究  [🎨#722ed1] [流程:研发流程C] [✏️]     │   │
│  │                                                         │   │
│  │ 🏗️ 工程类项目:                                          │   │
│  │ ├─ 🏭 基建工程  [🎨#faad14] [流程:工程流程A] [✏️]     │   │
│  │ ├─ 🔧 设备改造  [🎨#ff7a45] [流程:工程流程B] [✏️]     │   │
│  │ └─ 🌊 水务工程  [🎨#13c2c2] [流程:工程流程C] [✏️]     │   │
│  │                                                         │   │
│  │ 📊 咨询类项目:                                          │   │
│  │ ├─ 📈 管理咨询  [🎨#eb2f96] [流程:咨询流程A] [✏️]     │   │
│  │ └─ 🎯 战略规划  [🎨#f759ab] [流程:咨询流程B] [✏️]     │   │
│  │                                                         │   │
│  │ [➕ 添加类型] [🎨 批量配色] [📋 导出配置] [📥 导入模板]│   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

### 安全设置详细界面

```
┌─────────────────────────────────────────────────────────────────┐
│                    🔐 安全设置管理界面                           │
│                                                                 │
│  系统安全策略:                                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 🔒 登录安全:                                            │   │
│  │                                                         │   │
│  │ 密码策略:                                               │   │
│  │ ├─ 最小长度: [8___] 位                                  │   │
│  │ ├─ 复杂度要求: ☑️大写 ☑️小写 ☑️数字 ☑️特殊字符      │   │
│  │ ├─ 密码有效期: [90___] 天                               │   │
│  │ ├─ 历史密码限制: [5___] 次                              │   │
│  │ └─ 失败锁定: [5___] 次失败后锁定 [30___] 分钟          │   │
│  │                                                         │   │
│  │ 会话管理:                                               │   │
│  │ ├─ 会话超时: [120___] 分钟                              │   │
│  │ ├─ 单点登录: [● 启用] [○ 禁用]                         │   │
│  │ ├─ 多设备登录: [● 允许] [○ 禁止]                       │   │
│  │ └─ 强制下线: [🔘 管理员可强制用户下线]                  │   │
│  │                                                         │   │
│  │ IP访问控制:                                             │   │
│  │ ├─ 白名单模式: [○ 启用] [● 禁用]                       │   │
│  │ ├─ 黑名单: [192.168.1.100] [➕添加] [❌删除]           │   │
│  │ └─ 地域限制: [○ 启用] [● 禁用] [🌍配置地域]           │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  数据安全:                                                      │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 🗃️ 数据保护:                                            │   │
│  │                                                         │   │
│  │ 数据备份:                                               │   │
│  │ ├─ 自动备份: [● 启用] [○ 禁用]                         │   │
│  │ ├─ 备份频率: [每日____▼]                               │   │
│  │ ├─ 备份时间: [02:00____▼]                              │   │
│  │ ├─ 保留期限: [30___] 天                                │   │
│  │ └─ 存储位置: [/backup/daily] [📁选择]                  │   │
│  │                                                         │   │
│  │ 数据加密:                                               │   │
│  │ ├─ 传输加密: [● TLS 1.3] [○ TLS 1.2]                   │   │
│  │ ├─ 存储加密: [● AES-256] [○ AES-128]                   │   │
│  │ ├─ 敏感字段: [● 启用] [○ 禁用] [⚙️配置字段]           │   │
│  │ └─ 密钥管理: [🔑轮换周期: 90天] [🔄立即轮换]           │   │
│  │                                                         │   │
│  │ 数据脱敏:                                               │   │
│  │ ├─ 手机号脱敏: [● 启用] 138****5678                    │   │
│  │ ├─ 身份证脱敏: [● 启用] 110***********1234             │   │
│  │ ├─ 邮箱脱敏: [● 启用] abc***@example.com               │   │
│  │ └─ 自定义规则: [⚙️配置] [📋导入] [📤导出]             │   │
│  │                                                         │   │
│  │ 审计日志:                                                      │
│  │ ┌─────────────────────────────────────────────────────────┐   │
│  │ │ 📋 操作审计:                                            │   │
│  │ │                                                         │   │
│  │ │ 日志记录:                                               │   │
│  │ │ ├─ 用户登录: [● 记录] [○ 不记录]                       │   │
│  │ │ ├─ 数据变更: [● 记录] [○ 不记录]                       │   │
│  │ │ ├─ 权限变更: [● 记录] [○ 不记录]                       │   │
│  │ │ ├─ 系统配置: [● 记录] [○ 不记录]                       │   │
│  │ │ └─ 文件操作: [● 记录] [○ 不记录]                       │   │
│  │ │                                                         │   │
│  │ │ 日志管理:                                               │   │
│  │ │ ├─ 保留期限: [365___] 天                               │   │
│  │ │ ├─ 自动归档: [● 启用] [○ 禁用]                         │   │
│  │ │ ├─ 异地备份: [● 启用] [○ 禁用]                         │   │
│  │ │ └─ 告警阈值: [⚠️异常操作达到 10 次/小时自动告警]        │   │
│  │ │                                                         │   │
│  │ │ [📊 查看审计日志] [📋 导出报告] [🔍 实时监控]          │   │
│  │ └─────────────────────────────────────────────────────────┘   │
│  └─────────────────────────────────────────────────────────┘
```

### 界面设置详细界面

```
┌─────────────────────────────────────────────────────────────────┐
│                    🎨 界面设置管理界面                           │
│                                                                 │
│  主题外观:                                                      │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 🎨 主题配色:                                            │   │
│  │                                                         │   │
│  │ 预设主题:                                               │   │
│  │ ┌─────────┬─────────┬─────────┬─────────┬─────────┐   │   │
│  │ │ 🔵 经典蓝│ 🟢 清新绿│ 🟣 商务紫│ 🟤 大地棕│ ⚫ 暗夜黑│   │   │
│  │ │ #234fa2 │ #52c41a │ #722ed1 │ #ad6800 │ #262626 │   │   │
│  │ │ [●选中] │ [○选择] │ [○选择] │ [○选择] │ [○选择] │   │   │
│  │ └─────────┴─────────┴─────────┴─────────┴─────────┘   │   │
│  │                                                         │   │
│  │ 自定义配色:                                             │   │
│  │ ├─ 主色调: [🎨#234fa2] [🎨调色板]                      │   │
│  │ ├─ 辅助色: [🎨#52c41a] [🎨调色板]                      │   │
│  │ ├─ 警告色: [🎨#faad14] [🎨调色板]                      │   │
│  │ ├─ 错误色: [🎨#ff4d4f] [🎨调色板]                      │   │
│  │ └─ 背景色: [🎨#f5f7fa] [🎨调色板]                      │   │
│  │                                                         │   │
│  │ 字体设置:                                               │   │
│  │ ├─ 字体家族: [PingFang SC_____________▼]                │   │
│  │ ├─ 字体大小: [14px___] [🔍预览]                        │   │
│  │ ├─ 行间距: [1.5___] [🔍预览]                           │   │
│  │ └─ 字重: [● 正常] [○ 加粗] [○ 细体]                   │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  布局设置:                                                      │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 📐 页面布局:                                            │   │
│  │                                                         │   │
│  │ 侧边栏:                                                 │   │
│  │ ├─ 默认状态: [● 展开] [○ 收起]                         │   │
│  │ ├─ 宽度设置: [240px___]                                │   │
│  │ ├─ 背景色: [🎨#001529] [🎨调色板]                      │   │
│  │ └─ 固定模式: [● 启用] [○ 禁用]                         │   │
│  │                                                         │   │
│  │ 顶部导航:                                               │   │
│  │ ├─ 高度设置: [64px___]                                 │   │
│  │ ├─ 背景色: [🎨#ffffff] [🎨调色板]                      │   │
│  │ ├─ 阴影效果: [● 启用] [○ 禁用]                         │   │
│  │ └─ 面包屑: [● 显示] [○ 隐藏]                           │   │
│  │                                                         │   │
│  │ 内容区域:                                               │   │
│  │ ├─ 内边距: [24px___]                                   │   │
│  │ ├─ 卡片圆角: [12px___]                                 │   │
│  │ ├─ 卡片阴影: [● 启用] [○ 禁用]                         │   │
│  │ └─ 页脚显示: [● 显示] [○ 隐藏]                         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  快捷功能:                                                      │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ ⚡ 功能开关:                                            │   │
│  │                                                         │   │
│  │ 用户体验:                                               │   │
│  │ ├─ 页面动画: [● 启用] [○ 禁用]                         │   │
│  │ ├─ 加载提示: [● 启用] [○ 禁用]                         │   │
│  │ ├─ 进度提示: [● 启用] [○ 禁用]                         │   │
│  │ └─ 音效提示: [○ 启用] [● 禁用]                         │   │
│  │                                                         │   │
│  │ 表格配置:                                               │   │
│  │ ├─ 分页大小: [20___] 条/页                             │   │
│  │ ├─ 斑马纹: [● 启用] [○ 禁用]                           │   │
│  │ ├─ 边框: [● 显示] [○ 隐藏]                             │   │
│  │ └─ 紧凑模式: [○ 启用] [● 禁用]                         │   │
│  │                                                         │   │
│  │ 快捷键:                                                 │   │
│  │ ├─ 全局搜索: [Ctrl + K] [⚙️修改]                       │   │
│  │ ├─ 新建项目: [Ctrl + N] [⚙️修改]                       │   │
│  │ ├─ 保存: [Ctrl + S] [⚙️修改]                           │   │
│  │ └─ 切换主题: [Ctrl + T] [⚙️修改]                       │   │
│  │                                                         │   │
│  │ [👀 实时预览] [💾 保存配置] [🔄 恢复默认] [📤 导出主题]  │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

## 📐 设计规格

### 🌈 色彩方案
- **页面背景**: `#f5f7fa` (浅灰蓝)
- **卡片背景**: `#ffffff` (纯白)
- **主色调**: `#234fa2` (深蓝色)
- **功能分区**: 不同设置模块使用色彩区分
- **状态指示**: 绿色(启用)、红色(禁用)、橙色(警告)

### 📏 尺寸规格
- **页面内边距**: 24px
- **卡片圆角**: 12px
- **表单控件高度**: 32px
- **按钮高度**: 32px
- **设置项间距**: 16px

### 📝 字体规格
- **页面标题**: 24px, font-weight: bold
- **分组标题**: 18px, font-weight: 600
- **设置项标题**: 14px, font-weight: 600
- **描述文字**: 13px, color: #8c8c8c
- **输入框文字**: 14px

## ⚡ 交互逻辑

### 🔄 页面内交互

1. **标签页切换**
   - 平滑切换不同设置模块
   - 保持当前设置状态
   - 未保存提醒机制

2. **实时预览**
   - 主题配色实时预览
   - 布局调整实时生效
   - 字体设置即时反馈

3. **权限控制**
   - 根据用户角色显示设置项
   - 敏感设置需要二次确认
   - 操作日志记录

### 🔐 安全功能

1. **密码策略**
   - 实时密码强度检测
   - 历史密码重复检查
   - 密码到期提醒

2. **权限管理**
   - 角色权限矩阵
   - 细粒度权限控制
   - 权限变更审批

## 🚀 页面间跳转

### 跳转路径设计

1. **用户管理跳转**
   - 组织设置 → 用户详情: `/settings/user?id=U001`
   - 权限设置 → 角色管理: `/settings/role?id=R001`

2. **系统监控跳转**
   - 安全设置 → 审计日志: `/settings/audit`
   - 性能设置 → 系统监控: `/settings/monitor`

## 📱 响应式设计

### 大屏设备 (≥1200px)
- 左右分栏布局
- 设置菜单固定在左侧
- 内容区域右侧展示

### 中屏设备 (768px - 1199px)
- 上下布局排列
- 设置菜单收起为下拉选择
- 内容区域全宽展示

### 小屏设备 (≤767px)
- 移动端优化布局
- 设置菜单作为抽屉展示
- 表单控件适配移动端

## 🛠️ 技术实现

### 核心技术栈
- **Vue 3** + Composition API
- **Ant Design Vue** 组件库
- **VueUse** 工具库
- **Color Picker** 颜色选择器

### 组件架构
1. **主页面** - 设置页面容器
2. **设置菜单组件** - 导航切换
3. **个人设置组件** - 用户个人配置
4. **组织设置组件** - 组织架构管理
5. **安全设置组件** - 安全策略配置
6. **界面设置组件** - 主题外观配置

### 关键功能实现

1. **主题切换**
```javascript
// 动态主题切换
const switchTheme = (themeConfig) => {
  // 更新CSS变量
  Object.keys(themeConfig.colors).forEach(key => {
    document.documentElement.style.setProperty(
      `--${key}`, themeConfig.colors[key]
    )
  })
  
  // 保存到本地存储
  localStorage.setItem('theme-config', JSON.stringify(themeConfig))
  
  // 通知其他组件更新
  emit('theme-changed', themeConfig)
}
```

2. **权限验证**
```javascript
// 权限检查中间件
const checkPermission = (permission) => {
  const userPermissions = store.getters.userPermissions
  return userPermissions.includes(permission) || 
         userPermissions.includes('admin:all')
}

// 敏感操作二次确认
const confirmSensitiveOperation = async (action) => {
  const confirmed = await Modal.confirm({
    title: '敏感操作确认',
    content: `您即将进行 ${action} 操作，请确认您的身份`,
    onOk: () => verifyPassword()
  })
  return confirmed
}
```

3. **配置持久化**
```javascript
// 设置配置保存
const saveSettings = async (settingsData) => {
  try {
    // 验证配置数据
    const validatedData = validateSettings(settingsData)
    
    // 保存到后端
    await api.updateSettings(validatedData)
    
    // 更新本地缓存
    updateLocalCache(validatedData)
    
    // 记录操作日志
    logOperation('settings_update', validatedData)
    
    message.success('设置保存成功')
  } catch (error) {
    message.error('设置保存失败')
  }
}
```

## 🎯 用户体验亮点

1. **个性化定制**
   - 丰富的主题选择
   - 灵活的布局配置
   - 自定义快捷键

2. **安全可靠**
   - 完善的权限体系
   - 全面的审计日志
   - 数据安全保护

3. **操作便捷**
   - 实时预览效果
   - 批量配置功能
   - 一键恢复默认

4. **扩展性强**
   - 插件化架构
   - 配置导入导出
   - API开放接口

## 📋 待优化项

1. **智能推荐**
   - 基于使用习惯推荐设置
   - 智能主题适配
   - 个性化功能推荐

2. **高级功能**
   - 多租户支持
   - SSO集成
   - API管理

3. **移动端优化**
   - 移动端设置界面
   - 触摸友好交互
   - 离线配置同步

## 🔗 关联模块说明

### 影响范围
- **全系统**: 主题和界面设置影响所有页面
- **用户管理**: 权限设置影响用户访问控制
- **数据安全**: 安全设置影响整个系统安全

### 外部系统集成
- **AD/LDAP**: 用户身份验证
- **OA系统**: 组织架构同步
- **监控系统**: 系统性能监控 