# 🏗️ 立项管理中心页面设计文档 v1.0

## 📄 页面基础信息

- **页面名称**: 立项管理中心
- **路由地址**: `/approval/center`
- **组件路径**: `src/views/approval/index.vue`
- **设计版本**: v1.0
- **更新时间**: 2025-01-17

## 🎨 UI布局草图

### 整体页面布局结构

```
┌─────────────────────────────────────────────────────────────────┐
│                  🏗️ 立项管理中心页面容器                        │
│                   (全屏宽度，背景 #f5f7fa)                       │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                📊 页面头部区域                          │   │
│  │  ┌─────────────────────┐  ┌─────────────────────────┐  │   │
│  │  │ 🏗️ 项目立项管理清单  │  │ [+新建立项] [📊统计]     │  │   │
│  │  │ 集中管理所有立项申请， │  │ [✅批量审批]            │  │   │
│  │  │ 快速进入各流程环节    │  │                        │  │   │
│  │  └─────────────────────┘  └─────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                🔄 立项流程导航区域                       │   │
│  │                                                         │   │
│  │  ① 申请材料 ──→ ② 论证会 ──→ ③ 立项审批 ──→ ④ 询比文件审核  │   │
│  │     (8)          (5)         (12)          (3)         │   │
│  │                                                         │   │
│  │  [当前选中阶段高亮显示，显示该阶段的项目数量]             │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                📋 立项申请清单表格                       │   │
│  │  ┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐      │   │
│  │  │项目名│申请人│预算  │状态  │绑定需求│节点  │操作  │      │      │
│  │  ├─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┤      │   │
│  │  │智能水│张三  │200万 │待审批│[智能水表]│申请材料│编辑  │      │   │
│  │  │质监测│     │     │     │高优先级 │     │详情  │      │   │
│  │  │系统  │     │     │     │        │     │进入流程│      │   │
│  │  ├─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┤      │   │
│  │  │污水处│李四  │150万 │已通过│[管网监测]│论证会│编辑  │      │   │
│  │  │理优化│     │     │     │中优先级 │     │详情  │      │   │
│  │  │工艺  │     │     │     │        │     │进入流程│      │   │
│  │  ├─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┤      │   │
│  │  │管网漏│王五  │80万  │已通过│[设备更新]│审批  │编辑  │      │   │
│  │  │损检测│     │     │     │高优先级 │     │详情  │      │   │
│  │  │设备  │     │     │     │        │     │进入流程│      │   │
│  │  └─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘      │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

### 立项流程导航详细设计

```
┌─────────────────────────────────────────────────────────────────┐
│                    🔄 立项流程导航区域                           │
│                                                                 │
│    ①          ②          ③          ④                         │
│  ┌─────┐    ┌─────┐    ┌─────┐    ┌─────┐                      │
│  │申请材料│───→│论证会 │───→│立项审批│───→│询比文件│                      │
│  │     │    │     │    │     │    │审核  │                      │
│  │  8  │    │  5  │    │ 12  │    │  3  │                      │
│  └─────┘    └─────┘    └─────┘    └─────┘                      │
│    🔵        ⚪        ⚪        ⚪                         │
│   当前        未选中      未选中      未选中                        │
│                                                                 │
│  点击各阶段可切换显示对应阶段的项目列表                            │
│  当前选中阶段显示蓝色高亮，数字显示该阶段项目数量                  │
└─────────────────────────────────────────────────────────────────┘
```

### 新建/编辑立项申请弹窗设计

```
┌─────────────────────────────────────────────────────┐
│  🏗️ 新建立项申请                              ✖️   │
├─────────────────────────────────────────────────────┤
│                                                     │
│  基础信息                                           │
│  ┌─────────────────────────────────────────────┐   │
│  │ 立项名称: [智能水质监测系统升级____________] │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ┌─────────────────┐ ┌─────────────────────────┐   │
│  │ 申请人: [张三___] │ │ 预算: [200] 万元        │   │
│  └─────────────────┘ └─────────────────────────┘   │
│                                                     │
│  需求绑定                                           │
│  ┌─────────────────────────────────────────────┐   │
│  │ 绑定需求: [智能水表需求（高优先级）_______▼] │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │ 项目状态: [待审批____________________▼]    │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  项目描述                                           │
│  ┌─────────────────────────────────────────────┐   │
│  │ 基于已收集的需求，申请立项开展智能水质监测    │   │
│  │ 系统的研发工作，预期投资200万元...           │   │
│  │ ________________________________________ │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│               ┌────┐ ┌────┐                        │
│               │取消│ │保存│                        │
│               └────┘ └────┘                        │
└─────────────────────────────────────────────────────┘
```

### 项目详情抽屉设计

```
┌─────────────────────────────────┐
│  📋 立项申请详情          ✖️   │
├─────────────────────────────────┤
│                                 │
│  智能水质监测系统升级            │
│  📅 申请时间: 2024-01-15        │
│                                 │
│  基础信息                        │
│  ───────────────────────────    │
│  申请编号: A001                 │
│  申请人: 张三 (技术部)           │
│  项目预算: ¥200万               │
│  当前状态: 待审批               │
│  当前节点: 申请材料             │
│                                 │
│  绑定需求                        │
│  ───────────────────────────    │
│  🔗 智能水表需求                │
│  优先级: 高                     │
│  提出人: 张三                   │
│  需求描述: 对现有水质监测...      │
│                                 │
│  项目描述                        │
│  ───────────────────────────    │
│  基于已收集的需求，申请立项开展   │
│  智能水质监测系统的研发工作...    │
│                                 │
│  流程进度                        │
│  ───────────────────────────    │
│  ✅ 需求收集完成                │
│  🔄 申请材料准备中              │
│  ⏳ 等待论证会安排              │
│  ⏳ 等待立项审批                │
│                                 │
│  ┌─────┐ ┌─────┐ ┌─────┐        │
│  │编辑  │ │进入流程│ │删除 │        │
│  └─────┘ └─────┘ └─────┘        │
└─────────────────────────────────┘
```

## 📐 设计规格

### 🌈 色彩方案
- **页面背景**: `#f5f7fa` (浅灰蓝)
- **卡片背景**: `#ffffff` (纯白)
- **主色调**: `#234fa2` (深蓝色)
- **流程节点色彩**: 当前节点-蓝色 `#234fa2`，其他节点-灰色 `#d9d9d9`
- **状态颜色**: 待审批-橙色，已通过-绿色，已驳回-红色
- **卡片阴影**: `rgba(35,79,162,0.06)` - `rgba(35,79,162,0.12)`

### 📏 尺寸规格
- **页面内边距**: 24px
- **卡片圆角**: 12px
- **流程步骤间距**: 32px
- **表格行高**: 54px
- **按钮高度**: 32px
- **页面头部高度**: 96px

### 📝 字体规格
- **页面标题**: 24px, font-weight: bold
- **页面描述**: 14px, color: #64748b
- **流程标题**: 16px, font-weight: 600
- **表格内容**: 14px
- **标签文字**: 12px
- **按钮文字**: 14px

### 🎨 流程步骤样式
- **步骤圆圈**: 直径 32px，当前步骤蓝色背景，其他灰色背景
- **连接线**: 2px实线，颜色与目标节点一致
- **步骤标题**: 当前步骤加粗显示
- **项目数量**: 小徽章显示，动态更新

## ⚡ 交互逻辑

### 🔄 页面内交互

1. **流程导航交互**
   - 点击流程步骤切换显示内容
   - 高亮显示当前选中步骤
   - 动态显示各步骤项目数量
   - 步骤间连线视觉引导

2. **表格数据交互**
   - 根据选中流程步骤筛选数据
   - 表格支持排序功能
   - 绑定需求显示为标签形式
   - 状态用不同颜色标识

3. **快速操作功能**
   - 批量选择项目进行操作
   - 批量审批功能
   - 数据统计跳转
   - 表格数据导出

### 🚀 弹窗和抽屉交互

1. **新建/编辑立项弹窗**
   - 需求下拉选择（来自需求池）
   - 表单验证和数据校验
   - 状态联动更新
   - 自动生成申请编号

2. **项目详情抽屉**
   - 从右侧滑入显示
   - 完整信息展示
   - 关联需求信息展示
   - 流程进度可视化

3. **批量操作确认**
   - 批量审批确认弹窗
   - 批量删除二次确认
   - 操作结果反馈

### 📊 数据管理功能

1. **立项申请管理**
   - 新建立项申请
   - 编辑申请信息
   - 删除申请记录
   - 状态流转管理

2. **需求关联管理**
   - 从需求池选择绑定
   - 显示需求详细信息
   - 需求状态同步更新
   - 一对一绑定关系

3. **流程状态管理**
   - 自动流程节点推进
   - 状态变更记录
   - 流程回退功能
   - 审批历史追溯

## 🚀 页面间跳转

### 跳转路径设计

1. **流程页面跳转**
   - 申请材料 → `/approval/materials?projectId=A001`
   - 论证会 → `/approval/review?projectId=A001`
   - 立项审批 → `/approval/decision?projectId=A001`
   - 询比文件审核 → `/approval/inquiry?projectId=A001`

2. **关联页面跳转**
   - 绑定需求 → 需求详情页面
   - 数据统计 → 立项统计分析页面
   - 项目完成 → 项目实施中心

3. **导航面包屑**
   - 项目管理 > 项目立项 > 立项管理中心
   - 支持快速返回上级页面

### 参数传递机制
- 通过 `query` 参数传递 `projectId`
- 流程页面接收参数定位项目
- 状态变更后自动返回中心页面

## 📱 响应式设计

### 大屏设备 (≥1200px)
- 完整流程步骤横向展示
- 表格完整列显示
- 操作按钮全部展示

### 中屏设备 (768px - 1199px)
- 流程步骤可能换行
- 表格部分列隐藏
- 操作按钮收起到更多菜单

### 小屏设备 (≤767px)
- 流程步骤垂直排列
- 表格卡片化展示
- 操作功能简化

## 🛠️ 技术实现

### 核心技术栈
- **Vue 3** + Composition API
- **Ant Design Vue** Steps组件
- **Pinia** 状态管理（approvalStore）
- **Vue Router** 路由参数传递

### 组件架构
1. **主页面** - 布局和数据管理
2. **流程导航** - Steps组件自定义
3. **项目表格** - Table组件配置
4. **立项弹窗** - Modal + Form组件

### 关键功能实现
1. **状态管理**: Pinia store管理立项数据
2. **路由跳转**: query参数传递项目ID
3. **数据筛选**: computed计算属性过滤
4. **表格渲染**: 自定义单元格渲染
5. **表单验证**: Ant Design表单验证

### 数据模型设计

```javascript
// 立项申请数据模型
const approvalItem = {
  id: 'A001',                    // 申请编号
  title: '智能水质监测系统',      // 项目名称
  applicant: '张三',             // 申请人
  budget: 200,                   // 预算（万元）
  status: '待审批',              // 状态
  node: 'materials',             // 当前节点
  requirementId: 'REQ001',       // 绑定需求ID
  requirement: {...},            // 需求详情对象
  createdAt: '2024-01-15',       // 创建时间
  description: '项目描述...'      // 项目描述
}
```

## 🎯 用户体验亮点

1. **直观的流程导航**
   - 步骤式流程展示清晰明了
   - 实时数量统计一目了然
   - 当前位置明确标识

2. **高效的管理操作**
   - 一表集中管理所有申请
   - 快速跳转到具体流程环节
   - 批量操作提升效率

3. **智能的需求关联**
   - 从需求池直接选择绑定
   - 需求信息自动同步显示
   - 需求优先级清晰标识

4. **完整的信息展示**
   - 项目详情信息完备
   - 流程进度可视化展示
   - 关联信息一屏呈现

## 📋 待优化项

1. **流程自动化**
   - 自动流程节点推进
   - 条件满足自动审批
   - 异常情况自动预警

2. **协作功能增强**
   - 多人协作审批
   - 审批意见记录
   - 消息通知机制

3. **数据分析功能**
   - 立项成功率统计
   - 审批周期分析
   - 预算执行监控

4. **移动端优化**
   - 移动端审批功能
   - 推送通知支持
   - 离线数据同步

## 🔗 关联页面说明

### 流程子页面
- **申请材料管理**: 上传和管理立项申请文档
- **立项论证会**: 安排和管理论证会议
- **立项审批**: 审批决策和意见记录  
- **询比文件审核**: 采购询价文件审核

### 数据来源
- **需求池数据**: 来自需求管理模块
- **用户信息**: 来自系统用户管理
- **审批记录**: 各流程节点操作记录
- **统计数据**: 实时计算生成 